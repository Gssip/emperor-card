<head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>@import url(https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;600;700&family=ZCOOL+XiaoWei&display=swap);*{box-sizing:border-box;margin:0;padding:0}body,html{height:100%;overflow:hidden;font-family:'Noto Serif SC',STSongti,serif;font-size:15px;color:#c8c0b0;background:#141210}::-webkit-scrollbar{width:3px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:rgba(200,180,150,.15);border-radius:2px}#start-screen{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(ellipse at center,#1a1520 0,#0a0a0f 70%);cursor:pointer;transition:opacity .8s ease}#start-screen.fade-out{opacity:0;pointer-events:none}.start-title{font-family:'Ma Shan Zheng','ZCOOL XiaoWei',serif;font-size:3.5rem;letter-spacing:.5em;color:#c49a50;text-shadow:0 0 40px rgba(196,154,80,.3);margin-bottom:1rem;animation:titlePulse 3s ease-in-out infinite}.start-subtitle{font-size:1rem;color:#665e50;letter-spacing:.3em;animation:subtitleFade 2s ease-in-out infinite alternate}@keyframes titlePulse{0%,100%{text-shadow:0 0 40px rgba(196,154,80,.3)}50%{text-shadow:0 0 60px rgba(196,154,80,.5),0 0 100px rgba(196,154,80,.15)}}@keyframes subtitleFade{0%{opacity:.4}100%{opacity:1}}#game-container{display:none;width:100%;height:100%;flex-direction:column;background:#141210}#game-container.active{display:flex}#svm-topbar{position:relative;z-index:100;display:flex;justify-content:center;align-items:center;gap:16px;padding:6px 16px;height:36px;flex-shrink:0;background:#1a1714;border-bottom:1px solid rgba(200,180,150,.06);font-family:'ZCOOL XiaoWei','Noto Serif SC',serif;font-size:13px;color:#7a6e5e;letter-spacing:2px}#svm-topbar .seal{color:#d4503a;opacity:.7}#svm-topbar .time-info{display:flex;align-items:center;gap:10px}#svm-topbar .time-sep{opacity:.3}#svm-topbar .dots{display:flex;gap:3px}#svm-topbar .dot{width:5px;height:5px;border-radius:50%;background:rgba(200,180,150,.12)}#svm-topbar .dot.on{background:#d4503a;opacity:.8;box-shadow:0 0 4px rgba(212,80,58,.3)}#svm-topbar .tg-btn{width:26px;height:26px;border:none;border-radius:4px;background:0 0;box-shadow:0 0 0 1px rgba(200,180,150,.1);color:#7a6e5e;cursor:pointer;font-size:12px;display:grid;place-items:center;position:absolute;right:10px;transition:all .2s}#svm-topbar .tg-btn:hover{color:#c8c0b0;box-shadow:0 0 0 1px rgba(200,180,150,.2)}#sheld{display:flex;flex-direction:row;flex:1;min-height:0;overflow:hidden}#holder{flex:2;display:flex;flex-direction:column;min-width:0;overflow:hidden}#text-area{flex:1;overflow-y:auto;padding:10px 16px;display:flex;flex-direction:column;gap:2px;-webkit-overflow-scrolling:touch}#story-text p{margin-bottom:.8em;text-indent:2em;line-height:1.9;font-size:.95rem}#story-text em{color:#9a8e7e;font-style:italic}.loading-indicator{display:none;text-align:center;padding:20px;color:#665e50;font-size:.85rem}.loading-indicator.show{display:block}.loading-dots::after{content:'';animation:loadingDots 1.5s infinite}@keyframes loadingDots{0%{content:'.'}33%{content:'..'}66%{content:'...'}}#input-bar{display:flex;align-items:flex-end;gap:8px;padding:10px 16px;background:#181614;border-top:1px solid rgba(200,180,150,.06);flex-shrink:0}#user-input{flex:1;resize:none;border:1px solid rgba(200,180,150,.08);border-radius:8px;background:rgba(200,180,150,.03);color:#c8c0b0;font-size:14px;padding:8px 12px;outline:0;max-height:120px;font-family:inherit;line-height:1.5}#user-input::placeholder{color:#4a4238}#user-input:focus{border-color:rgba(200,180,150,.15)}#send-btn{width:36px;height:36px;border-radius:8px;border:none;background:rgba(184,58,42,.3);color:#d4503a;cursor:pointer;display:grid;place-items:center;font-size:14px;flex-shrink:0;transition:.2s}#send-btn:active{transform:scale(.92);background:rgba(184,58,42,.45)}#status-panel{flex:1;max-width:33.33%;min-width:280px;display:flex;flex-direction:column;background:#1a1714;border-left:1px solid rgba(200,180,150,.06);overflow-y:auto;-webkit-overflow-scrolling:touch;position:relative;font-family:'Noto Serif SC',STSongti,serif;color:#c8c0b0}#status-panel::before{content:'';position:absolute;inset:0;pointer-events:none;z-index:0;background-image:radial-gradient(ellipse at 30% 20%,rgba(100,80,50,.03),transparent 50%),radial-gradient(ellipse at 70% 70%,rgba(100,80,50,.04),transparent 60%),repeating-linear-gradient(2deg,transparent,transparent 1.8px,rgba(80,65,40,.01) 1.8px,rgba(80,65,40,.01) 2.8px)}#status-panel .s-title{font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.3rem;text-align:center;letter-spacing:4px;padding:12px 0 8px;color:#c8c0b0;position:relative;z-index:1}#status-panel .s-title::after{content:'';position:absolute;bottom:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,rgba(200,180,150,.1),transparent)}#status-panel .s-nav{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;position:relative;z-index:1}#status-panel .s-nav-btn{width:28px;height:28px;border-radius:4px;background:0 0;border:none;box-shadow:0 0 0 1px rgba(200,180,150,.08);color:#7a6e5e;cursor:pointer;font-size:13px;display:grid;place-items:center}#status-panel .s-nav-btn:active{transform:scale(.92)}#status-panel .s-nav-center{display:flex;align-items:baseline;gap:8px;flex:1;justify-content:center}#status-panel .s-char-name{font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.6rem;color:#c8c0b0;letter-spacing:3px}#status-panel .s-char-role{font-size:.8rem;color:#7a6e5e;font-weight:300}#status-panel .s-char-idx{font-size:.55rem;color:#d4503a;opacity:.5}#status-panel .s-content{padding:8px 12px;position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:10px}#status-panel .s-seal{width:140px;height:190px;display:grid;place-items:center;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:3.5rem;color:rgba(212,80,58,.35);background:radial-gradient(ellipse at center 40%,rgba(200,180,150,.02),transparent);border:2px solid rgba(200,180,150,.1);position:relative}#status-panel .s-seal::after,#status-panel .s-seal::before{content:'';position:absolute;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 5%,rgba(200,180,150,.1) 20%,rgba(200,180,150,.15) 50%,rgba(200,180,150,.1) 80%,transparent 95%)}#status-panel .s-seal::before{top:-1px}#status-panel .s-seal::after{bottom:-1px}#status-panel .s-info{width:100%}#status-panel .s-bar{display:flex;align-items:center;gap:8px;margin-bottom:6px}#status-panel .s-bar-lb{font-size:.85rem;color:#7a6e5e;white-space:nowrap;min-width:50px}#status-panel .s-bar-track{flex:1;height:2px;background:rgba(200,180,150,.04);position:relative;overflow:visible}#status-panel .s-bar-fill{height:100%;position:relative;transition:width .8s ease-out}#status-panel .s-bar-fill::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,var(--sc) 0,var(--sc) 65%,color-mix(in srgb,var(--sc),transparent 25%) 80%,color-mix(in srgb,var(--sc),transparent 60%) 92%,transparent)}#status-panel .s-bar-fill::after{content:'';position:absolute;top:-2px;bottom:-2px;right:-6px;width:12px;background:radial-gradient(ellipse at left center,color-mix(in srgb,var(--sc),transparent 55%),transparent 70%);opacity:.4}#status-panel .s-bar-fill.full::before{background:var(--sc)}#status-panel .s-bar-fill.full::after{display:none}#status-panel .s-bar-val{font-size:.9rem;font-weight:700;white-space:nowrap}#status-panel .s-thought{padding:4px 0 4px 8px;position:relative;margin-top:4px;font-size:.8rem;color:#9a8e7e;font-style:italic;line-height:1.5}#status-panel .s-thought::before{content:'';position:absolute;left:0;top:4px;bottom:4px;width:1px;background:linear-gradient(180deg,transparent,rgba(200,180,150,.1),transparent)}#status-panel .s-thought em{font-style:normal;color:#665e50;font-size:.65rem}#status-panel .s-colophon{text-align:center;padding:8px 0;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:.55rem;color:rgba(200,180,150,.18);letter-spacing:4px;position:relative;z-index:1}#settings-panel{display:none;position:absolute;top:100%;right:10px;background:rgba(26,23,20,.95);border:1px solid rgba(200,180,150,.1);border-radius:6px;padding:4px 0;min-width:130px;z-index:200;backdrop-filter:blur(20px);box-shadow:0 8px 32px rgba(0,0,0,.5)}#settings-panel.show{display:block}.settings-item{padding:7px 14px;cursor:pointer;font-size:.8rem;color:#7a6e5e;transition:all .15s}.settings-item:hover{background:rgba(200,180,150,.06);color:#c8c0b0}#chronicle-modal{display:none;position:fixed;inset:0;z-index:500;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);justify-content:center;align-items:center}#chronicle-modal.show{display:flex}.chronicle-box{width:90%;max-width:600px;max-height:80vh;background:rgba(26,23,20,.95);border:1px solid rgba(200,180,150,.1);border-radius:10px;overflow:hidden;display:flex;flex-direction:column}.chronicle-header{padding:14px 18px;border-bottom:1px solid rgba(200,180,150,.06);display:flex;justify-content:space-between;align-items:center;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.1rem;color:#c49a50}.chronicle-close{cursor:pointer;color:#665e50;font-size:1.2rem;transition:color .2s}.chronicle-close:hover{color:#c8c0b0}.chronicle-list{flex:1;overflow-y:auto;padding:14px 18px}.chronicle-entry{padding:8px 0;border-bottom:1px solid rgba(200,180,150,.04);font-size:.85rem;color:#9a8e7e;line-height:1.5}.chronicle-entry:last-child{border-bottom:none}.chronicle-time{font-size:.75rem;color:#665e50;margin-bottom:2px}@media (max-width:768px){.start-title{font-size:2.2rem;letter-spacing:.3em}#sheld{flex-direction:column!important}#status-panel{position:fixed;right:-100%;top:0;bottom:0;max-width:75%;min-width:unset;width:280px;z-index:200;transition:right .3s ease;box-shadow:-8px 0 32px rgba(0,0,0,.5)}#status-panel.mobile-open{right:0}#status-panel .s-seal{width:100px;height:140px;font-size:2.5rem}.mobile-status-toggle{display:flex!important}.mobile-overlay.show{display:block}}@media (min-width:769px){.mobile-status-toggle{display:none!important}.mobile-overlay{display:none!important}}.mobile-status-toggle{display:none;position:fixed;right:12px;bottom:60px;width:36px;height:36px;z-index:199;background:rgba(26,23,20,.9);border:1px solid rgba(200,180,150,.1);border-radius:50%;align-items:center;justify-content:center;color:#d4503a;cursor:pointer;font-size:.9rem}.mobile-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:198}</style><script type="module">const t='function'==typeof globalThis.$&&void 0!==globalThis.SillyTavern,e={çš‡å¸:{è§‰é†’åº¦:12,å½“å‰å¹•:'ç¬¬ä¸€å¹•'},æå…‹:{è­¦æƒ•åº¦:35,å†…å¿ƒæƒ³æ³•:'è¿™å°çš‡å¸ä»Šæ™šå€’æ˜¯æ ¼å¤–å®‰åˆ†â€¦â€¦ä¸è¿‡æœ€è¿‘ä»–å¶å°”ä¼šé—®èµ·æœæ”¿ï¼Œéœ€è¦å¤šåŠ ç•™æ„ã€‚'},æŸ³å¦ƒ:{æ¯çˆ±æ®‹å­˜:42,å†…å¿ƒæƒ³æ³•:'å„¿å•Šâ€¦â€¦ä½ åˆç˜¦äº†ã€‚å¯æ˜¯ä»Šæ™šæå…‹è¿˜è¦æ¥â€¦â€¦æˆ‘æ— æ³•æ‹’ç»ä»–ã€‚'},æ—å©‰èŒ¹:{å¿ è¯šåŠ¨æ‘‡:28,å†…å¿ƒæƒ³æ³•:'é‚£æ˜¥è¯çš„é…æ–¹â€¦â€¦å¦‚æœé™›ä¸‹çŸ¥é“çœŸç›¸ï¼Œä»–ä¼šæ¨æˆ‘å—ï¼Ÿ'},è‹é”¦å„¿:{å¯ç­–ååº¦:15,å†…å¿ƒæƒ³æ³•:'å‡ ç§’é’Ÿçš„ç©å…·ç½¢äº†ã€‚ä¸è¿‡æå…‹å¤§äººä»Šæ™šä¼šæ¥"å–„å"å§â€¦â€¦èº«ä½“å·²ç»å¼€å§‹æœŸå¾…äº†ã€‚'},æ²ˆæ¸…èŠ·:{å¤ä»‡å†³å¿ƒ:88,èº«ä½“æŠ—è¯:45,å†…å¿ƒæƒ³æ³•:'æ€»æœ‰ä¸€å¤©ï¼Œæˆ‘ä¼šäº²æ‰‹å‰²ä¸‹é‚£ä¸ªç”·äººçš„å¤´é¢…â€¦â€¦å¯æ˜¯è¿™è¯¥æ­»çš„èº«ä½“ï¼Œåˆåœ¨æ¸´æœ›ä»–äº†ã€‚'},èµµå«£:{æš—æ‹å¼ºåº¦:72,å‹æŠ‘ä¸´ç•Œ:78,å†…å¿ƒæƒ³æ³•:'é™›ä¸‹ä»Šæ—¥æ•´ç†å¯å…·æ—¶ç•™ä¸‹çš„æ°”å‘³â€¦â€¦ä¸ã€ä¸å¯ä»¥æƒ³è¿™äº›ã€‚æˆ‘æ˜¯å°šå®«å±€çš„äººã€‚'}},n=[{name:'æå…‹',role:'ä¸ç›¸',color:'rgba(180,80,70,0.75)',stats:[{label:'è­¦æƒ•åº¦',path:'/æå…‹/è­¦æƒ•åº¦'}],thoughtPath:'/æå…‹/å†…å¿ƒæƒ³æ³•'},{name:'æŸ³å¦ƒ',role:'å¤ªå',color:'rgba(190,170,90,0.7)',stats:[{label:'æ¯çˆ±æ®‹å­˜',path:'/æŸ³å¦ƒ/æ¯çˆ±æ®‹å­˜'}],thoughtPath:'/æŸ³å¦ƒ/å†…å¿ƒæƒ³æ³•'},{name:'æ—å©‰èŒ¹',role:'å¾¡åŒ»',color:'rgba(100,170,130,0.7)',stats:[{label:'å¿ è¯šåŠ¨æ‘‡',path:'/æ—å©‰èŒ¹/å¿ è¯šåŠ¨æ‘‡'}],thoughtPath:'/æ—å©‰èŒ¹/å†…å¿ƒæƒ³æ³•'},{name:'è‹é”¦å„¿',role:'å¾¡å¥³è¥èŠ±é­',color:'rgba(200,100,110,0.7)',stats:[{label:'å¯ç­–ååº¦',path:'/è‹é”¦å„¿/å¯ç­–ååº¦'}],thoughtPath:'/è‹é”¦å„¿/å†…å¿ƒæƒ³æ³•'},{name:'æ²ˆæ¸…èŠ·',role:'å°†é—¨ä¹‹å¥³',color:'rgba(90,130,180,0.7)',stats:[{label:'å¤ä»‡å†³å¿ƒ',path:'/æ²ˆæ¸…èŠ·/å¤ä»‡å†³å¿ƒ'},{label:'èº«ä½“æŠ—è¯',path:'/æ²ˆæ¸…èŠ·/èº«ä½“æŠ—è¯'}],thoughtPath:'/æ²ˆæ¸…èŠ·/å†…å¿ƒæƒ³æ³•'},{name:'èµµå«£',role:'å°šå®«å±€ä¸»äº‹',color:'rgba(150,110,180,0.7)',stats:[{label:'æš—æ‹å¼ºåº¦',path:'/èµµå«£/æš—æ‹å¼ºåº¦'},{label:'å‹æŠ‘ä¸´ç•Œ',path:'/èµµå«£/å‹æŠ‘ä¸´ç•Œ'}],thoughtPath:'/èµµå«£/å†…å¿ƒæƒ³æ³•'}],s={ç¬¬ä¸€å¹•:'ç¬¬ä¸€å¹•Â·æ²‰æ²¦',ç¬¬äºŒå¹•:'ç¬¬äºŒå¹•Â·è£‚ç—•',ç¬¬ä¸‰å¹•:'ç¬¬ä¸‰å¹•Â·æš—æµ',ç¬¬å››å¹•:'ç¬¬å››å¹•Â·ç ´å±€'};function o(n){try{const s=n.split('/').filter(Boolean);let o;if(t)try{const t=Mvu.getMvuData({type:'chat'});o=t?.stat_data}catch{o=getAllVariables()}else o=e;for(const t of s)o=o?.[t];return o}catch{return}}function a(t){const e=o('/çš‡å¸/è§‰é†’åº¦')??0,n=o('/çš‡å¸/å½“å‰å¹•')??'ç¬¬ä¸€å¹•',a=s[n]||n,c=document.getElementById('act-tag'),l=document.getElementById('awakening-value'),i=document.getElementById('awakening-dots');if(c&&(c.textContent=a),l&&(l.textContent=String(e)),i){const t=Math.min(4,Math.floor(e/25));i.querySelectorAll('.dot').forEach((e,n)=>{e.classList.toggle('on',n<t)})}if(t){const e=document.getElementById('time-tag'),n=document.getElementById('weather-tag'),s=document.getElementById('location-tag');e&&(e.textContent=t.time||'æœªçŸ¥'),n&&(n.textContent=t.weather||''),s&&(s.textContent=t.location||'')}}let c=0;function l(t){c=(c+t+n.length)%n.length,r()}function i(t,e,n){const s=Math.min(100,e);return`<div class="s-bar">\n        <span class="s-bar-lb">${t}</span>\n        <div class="s-bar-track">\n            <div class="s-bar-fill${s>=100?' full':''}" style="width:${s}%;--sc:${n}"></div>\n        </div>\n        <span class="s-bar-val" style="color:${n}">${e}</span>\n    </div>`}function r(){const t=document.getElementById('char-status');if(!t)return;const e=n[c];if(!e)return void(t.innerHTML='');const s=document.getElementById('char-name'),a=document.getElementById('char-role'),l=document.getElementById('char-idx');s&&(s.textContent=e.name),a&&(a.textContent=e.role),l&&(l.textContent=`${c+1}/${n.length}`);let r=`<div class="s-seal">${e.name[0]}</div>`,d='';for(const t of e.stats){const n=o(t.path)??0;d+=i(t.label,n,e.color)}const m=o(e.thoughtPath)||'';r+=`<div class="s-info">${d}${`<div class="s-thought"><em>å†…å¿ƒ </em>${m?'ã€Œ'+m+'ã€':'<span style="opacity:.3">æš‚æ— </span>'}</div>`}</div>`,t.innerHTML=r}const d=[];function m(t,e){d.push({time:t,content:e}),function(){const t=document.getElementById('chronicle-list');if(0===d.length)return void(t.innerHTML='<div class="chronicle-entry"><div class="chronicle-time">æ‰¿å¹³ä¸‰å¹´</div>æ•…äº‹å°šæœªå±•å¼€â€¦â€¦</div>');t.innerHTML=d.map(t=>`\n    <div class="chronicle-entry">\n      <div class="chronicle-time">${t.time}</div>\n      ${t.content}\n    </div>\n  `).join('')}()}let u=-1;function h(){try{const t=SillyTavern.chat;if(!t||0===t.length)return;if(t.length===u)return;u=t.length;const e=t[t.length-1];if(!e||e.is_user)return;const n=e.mes||'';if(!n)return;document.getElementById('loading-indicator')?.classList.remove('show');const s=function(t){const e=t.match(/â˜(.+?)â˜œ/);if(!e)return null;const n=e[1].split('-').map(t=>t.trim());return{year:n[0]||'',date:n[1]||'',weather:n[2]||'',time:n[3]||'',location:n[4]||'',atmosphere:n[5]||''}}(n);a(s);const o=function(t){const e=t.match(/<maintext>([\s\S]*?)<\/maintext>/);if(e)return e[1].trim();let n=t;return n=n.replace(/â˜[\s\S]*?â˜œ\s*/,''),n=n.replace(/<UpdateVariable>[\s\S]*$/,''),n=n.replace(/<StatusPlaceHolderImpl\/?>[\s]*$/,''),n=n.replace(/<sum>[\s\S]*?<\/sum>/g,''),n.trim()}(n);o&&function(t){const e=document.getElementById('story-text'),n=t.split('\n').filter(t=>t.trim());e.innerHTML=n.map(t=>`<p>${t}</p>`).join('');const s=document.getElementById('text-area');s.scrollTop=s.scrollHeight}(o);const c=function(t){const e=t.match(/<sum>([\s\S]*?)<\/sum>/);return e?e[1].trim():''}(n);if(c&&s){m(`${s.year} ${s.date} ${s.time}`,c)}r()}catch(t){}}const g='[çš‡å¸å¡]';function p(t,e,n,s,o,a){return{id:crypto.randomUUID?.()??Math.random().toString(36).slice(2),script_name:`${g} ${t}`,enabled:!0,scope:'character',find_regex:e,replace_string:n,trim_strings:'',source:{user_input:!1,ai_output:!1,slash_command:!1,world_info:!1,...s},destination:{display:!1,prompt:!1,...o},run_on_edit:!0,min_depth:a??null,max_depth:null}}function y(){if(function(){const t=document.getElementById('start-screen'),e=document.getElementById('game-container');t.addEventListener('click',()=>{t.classList.add('fade-out'),setTimeout(()=>{t.style.display='none',e.classList.add('active')},800);try{document.documentElement.requestFullscreen?.()}catch{}})}(),function(){const t=document.getElementById('settings-btn'),e=document.getElementById('settings-panel');t.addEventListener('click',t=>{t.stopPropagation(),e.classList.toggle('show')}),document.addEventListener('click',()=>e.classList.remove('show')),document.getElementById('btn-chronicle')?.addEventListener('click',()=>{e.classList.remove('show'),document.getElementById('chronicle-modal')?.classList.add('show')}),document.getElementById('btn-fullscreen')?.addEventListener('click',()=>{e.classList.remove('show'),document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen?.()}),document.getElementById('chronicle-close')?.addEventListener('click',()=>{document.getElementById('chronicle-modal')?.classList.remove('show')}),document.getElementById('chronicle-modal')?.addEventListener('click',t=>{t.target===t.currentTarget&&t.currentTarget.classList.remove('show')})}(),function(){const t=document.getElementById('btn-prev'),e=document.getElementById('btn-next');t?.addEventListener('click',()=>l(-1)),e?.addEventListener('click',()=>l(1)),document.getElementById('btn-toggle-sidebar')?.addEventListener('click',()=>{const t=document.getElementById('status-panel');t&&(t.style.display='none'===t.style.display?'':'none'),document.getElementById('settings-panel')?.classList.remove('show')});const n=document.getElementById('mobile-status-toggle'),s=document.getElementById('status-panel'),o=document.getElementById('mobile-overlay');n?.addEventListener('click',()=>{s?.classList.toggle('mobile-open'),o?.classList.toggle('show')}),o?.addEventListener('click',()=>{s?.classList.remove('mobile-open'),o?.classList.remove('show')});let a=0;s?.addEventListener('touchstart',t=>{a=t.touches[0].clientX}),s?.addEventListener('touchend',t=>{const e=t.changedTouches[0].clientX-a;Math.abs(e)>50&&l(e<0?1:-1)})}(),function(){const t=document.getElementById('user-input'),e=document.getElementById('send-btn'),n=document.getElementById('loading-indicator');t.addEventListener('input',()=>{t.style.height='auto',t.style.height=Math.min(t.scrollHeight,80)+'px'});const s=()=>{const e=t.value.trim();if(e){t.value='',t.style.height='auto',n.classList.add('show');try{const t=document.querySelector('#send_textarea');t&&(t.value=e,t.dispatchEvent(new Event('input',{bubbles:!0})));const n=document.querySelector('#send_but');n&&n.click()}catch(t){console.error('å‘é€å¤±è´¥:',t),n.classList.remove('show')}}};e.addEventListener('click',s),t.addEventListener('keydown',t=>{'Enter'!==t.key||t.shiftKey||(t.preventDefault(),s())})}(),t){const t=document.createElement('style');t.textContent='\n            #chat .mes { display: none !important; }\n            #chat { background: transparent !important; }\n        ',document.head.appendChild(t),async function(){try{await updateTavernRegexesWith(t=>{const e=t.filter(t=>!t.script_name.startsWith(g));return e.push(p('éšè—æ—¶é—´æ ','â˜[\\s\\S]*?â˜œ','',{ai_output:!0},{display:!0}),p('éšè—å˜é‡æ›´æ–°','<UpdateVariable>[\\s\\S]*?</UpdateVariable>','',{ai_output:!0},{display:!0}),p('å˜é‡æ·±åº¦é™åˆ¶','<UpdateVariable>[\\s\\S]*?</UpdateVariable>','',{ai_output:!0},{prompt:!0},6),p('éšè—å ä½ç¬¦','<StatusPlaceHolderImpl/?>','',{ai_output:!0},{prompt:!0})),e},{scope:'character'})}catch(t){console.warn('[çš‡å¸å¡] æ­£åˆ™æ³¨å…¥å¤±è´¥:',t)}}();try{(SillyTavern.chat?.length??0)>1&&(document.getElementById('start-screen').style.display='none',document.getElementById('game-container').classList.add('active'),h())}catch{}setInterval(h,1e3)}a(),r()}t?($(()=>y()),$(window).on('pagehide',()=>{})):'loading'===document.readyState?document.addEventListener('DOMContentLoaded',y):y();
//# sourceMappingURL=index.js.map</script></head><body><div id="start-screen"><div class="start-title">æ²‰æ²¦è‰²æ¬²çš„çš‡å¸</div><div class="start-subtitle">â€” ç‚¹å‡»ä»»æ„å¤„å¼€å§‹ â€”</div></div><div id="game-container"><div id="svm-topbar"><i class="fa-solid fa-feather-pointed seal" style="font-size:11px"></i> <span id="act-tag">ç¬¬ä¸€å¹•Â·æ²‰æ²¦</span><div class="time-info"><span id="time-tag">å­æ—¶</span> <span class="time-sep">Â·</span> <span id="weather-tag">æœˆæ˜é£æ¸…</span> <span class="time-sep">Â·</span> <span id="location-tag">çš‡å¸å¯å®«</span></div><div class="dots" id="awakening-dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div><span class="seal" style="font-size:12px;opacity:.6">è§‰é†’ <span id="awakening-value">5</span></span> <button class="tg-btn" id="settings-btn" title="è®¾ç½®"><i class="fa-solid fa-gear"></i></button><div id="settings-panel"><div class="settings-item" id="btn-chronicle">ğŸ“œ ç¼–å¹´å²</div><div class="settings-item" id="btn-settings">âš™ è®¾ç½®</div><div class="settings-item" id="btn-fullscreen">â›¶ å…¨å±åˆ‡æ¢</div><div class="settings-item" id="btn-toggle-sidebar">â˜° çŠ¶æ€æ </div></div></div><div id="sheld"><div id="holder"><div id="text-area"><div id="story-text"><p>çƒ›ç«æ‘‡æ›³ï¼Œå¯å®«å†…å¼¥æ¼«ç€æª€é¦™ä¸è„‚ç²‰äº¤ç»‡çš„æ°”æ¯ã€‚</p><p>é¾™åºŠä¸Šçš„ç»«ç½—é”¦è¢«å¾®å¾®èµ·ä¼ï¼Œå¸˜å¹”ä½å‚é—´éšçº¦å¯è§äº¤å çš„èº«å½±ã€‚</p></div><div class="loading-indicator" id="loading-indicator"><span class="loading-dots">æ­£åœ¨ç”Ÿæˆ</span></div></div><div id="input-bar"><textarea id="user-input" rows="1" placeholder="è¾“å…¥ä½ çš„è¡ŒåŠ¨..."></textarea> <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button></div></div><div id="status-panel"><div class="s-title">äººç‰©çŠ¶æ€</div><div class="s-nav"><button class="s-nav-btn" id="btn-prev"><i class="fa-solid fa-chevron-left"></i></button><div class="s-nav-center"><span class="s-char-name" id="char-name">æå…‹</span> <span class="s-char-role" id="char-role">ä¸ç›¸</span> <span class="s-char-idx" id="char-idx">1/6</span></div><button class="s-nav-btn" id="btn-next"><i class="fa-solid fa-chevron-right"></i></button></div><div class="s-content" id="char-status"></div><div class="s-colophon">æ‰¿å¹³ä¸‰å¹´</div></div></div></div><div id="chronicle-modal"><div class="chronicle-box"><div class="chronicle-header"><span>ğŸ“œ ç¼–å¹´å²</span> <span class="chronicle-close" id="chronicle-close">âœ•</span></div><div class="chronicle-list" id="chronicle-list"><div class="chronicle-entry"><div class="chronicle-time">æ‰¿å¹³ä¸‰å¹´ äºŒæœˆåˆä¸ƒ å­æ—¶</div>æ•…äº‹å°šæœªå±•å¼€â€¦â€¦</div></div></div></div><button class="mobile-status-toggle" id="mobile-status-toggle">â˜°</button><div class="mobile-overlay" id="mobile-overlay"></div><div id="app"></div></body>