<head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><style>@import url(https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;600;700&family=ZCOOL+XiaoWei&display=swap);*{box-sizing:border-box;margin:0;padding:0}body,html{height:100%;overflow:hidden;font-family:'Noto Serif SC',STSongti,serif;font-size:15px;color:#c8c0b0;background:#141210}::-webkit-scrollbar{width:3px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:rgba(200,180,150,.15);border-radius:2px}#start-screen{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(ellipse at center,#1a1520 0,#0a0a0f 70%);cursor:pointer;transition:opacity .8s ease}#start-screen.fade-out{opacity:0;pointer-events:none}.start-title{font-family:'Ma Shan Zheng','ZCOOL XiaoWei',serif;font-size:3.5rem;letter-spacing:.5em;color:#c49a50;text-shadow:0 0 40px rgba(196,154,80,.3);margin-bottom:1rem;animation:titlePulse 3s ease-in-out infinite}.start-subtitle{font-size:1rem;color:#665e50;letter-spacing:.3em;animation:subtitleFade 2s ease-in-out infinite alternate}@keyframes titlePulse{0%,100%{text-shadow:0 0 40px rgba(196,154,80,.3)}50%{text-shadow:0 0 60px rgba(196,154,80,.5),0 0 100px rgba(196,154,80,.15)}}@keyframes subtitleFade{0%{opacity:.4}100%{opacity:1}}#game-container{display:none;width:100%;height:100%;flex-direction:column;background:#141210}#game-container.active{display:flex}#svm-topbar{position:relative;z-index:100;display:flex;justify-content:center;align-items:center;gap:16px;padding:6px 16px;height:36px;flex-shrink:0;background:#1a1714;border-bottom:1px solid rgba(200,180,150,.06);font-family:'ZCOOL XiaoWei','Noto Serif SC',serif;font-size:13px;color:#7a6e5e;letter-spacing:2px}#svm-topbar .seal{color:#d4503a;opacity:.7}#svm-topbar .time-info{display:flex;align-items:center;gap:10px}#svm-topbar .time-sep{opacity:.3}#svm-topbar .dots{display:flex;gap:3px}#svm-topbar .dot{width:5px;height:5px;border-radius:50%;background:rgba(200,180,150,.12)}#svm-topbar .dot.on{background:#d4503a;opacity:.8;box-shadow:0 0 4px rgba(212,80,58,.3)}#svm-topbar .tg-btn{width:26px;height:26px;border:none;border-radius:4px;background:0 0;box-shadow:0 0 0 1px rgba(200,180,150,.1);color:#7a6e5e;cursor:pointer;font-size:12px;display:grid;place-items:center;position:absolute;right:10px;transition:all .2s}#svm-topbar .tg-btn:hover{color:#c8c0b0;box-shadow:0 0 0 1px rgba(200,180,150,.2)}#sheld{display:flex;flex-direction:row;flex:1;min-height:0;overflow:hidden}#holder{flex:2;display:flex;flex-direction:column;min-width:0;overflow:hidden}#text-area{flex:1;overflow-y:auto;padding:10px 16px;display:flex;flex-direction:column;gap:2px;-webkit-overflow-scrolling:touch}#story-text p{margin-bottom:.8em;text-indent:2em;line-height:1.9;font-size:.95rem}#story-text em{color:#9a8e7e;font-style:italic}.loading-indicator{display:none;text-align:center;padding:20px;color:#665e50;font-size:.85rem}.loading-indicator.show{display:block}.loading-dots::after{content:'';animation:loadingDots 1.5s infinite}@keyframes loadingDots{0%{content:'.'}33%{content:'..'}66%{content:'...'}}#input-bar{display:flex;align-items:flex-end;gap:8px;padding:10px 16px;background:#181614;border-top:1px solid rgba(200,180,150,.06);flex-shrink:0}#user-input{flex:1;resize:none;border:1px solid rgba(200,180,150,.08);border-radius:8px;background:rgba(200,180,150,.03);color:#c8c0b0;font-size:14px;padding:8px 12px;outline:0;max-height:120px;font-family:inherit;line-height:1.5}#user-input::placeholder{color:#4a4238}#user-input:focus{border-color:rgba(200,180,150,.15)}#send-btn{width:36px;height:36px;border-radius:8px;border:none;background:rgba(184,58,42,.3);color:#d4503a;cursor:pointer;display:grid;place-items:center;font-size:14px;flex-shrink:0;transition:.2s}#send-btn:active{transform:scale(.92);background:rgba(184,58,42,.45)}#status-panel{flex:1;max-width:33.33%;min-width:280px;display:flex;flex-direction:column;background:#1a1714;border-left:1px solid rgba(200,180,150,.06);overflow-y:auto;-webkit-overflow-scrolling:touch;position:relative;font-family:'Noto Serif SC',STSongti,serif;color:#c8c0b0}#status-panel::before{content:'';position:absolute;inset:0;pointer-events:none;z-index:0;background-image:radial-gradient(ellipse at 30% 20%,rgba(100,80,50,.03),transparent 50%),radial-gradient(ellipse at 70% 70%,rgba(100,80,50,.04),transparent 60%),repeating-linear-gradient(2deg,transparent,transparent 1.8px,rgba(80,65,40,.01) 1.8px,rgba(80,65,40,.01) 2.8px)}#status-panel .s-title{font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.3rem;text-align:center;letter-spacing:4px;padding:12px 0 8px;color:#c8c0b0;position:relative;z-index:1}#status-panel .s-title::after{content:'';position:absolute;bottom:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,rgba(200,180,150,.1),transparent)}#status-panel .s-nav{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;position:relative;z-index:1}#status-panel .s-nav-btn{width:28px;height:28px;border-radius:4px;background:0 0;border:none;box-shadow:0 0 0 1px rgba(200,180,150,.08);color:#7a6e5e;cursor:pointer;font-size:13px;display:grid;place-items:center}#status-panel .s-nav-btn:active{transform:scale(.92)}#status-panel .s-nav-center{display:flex;align-items:baseline;gap:8px;flex:1;justify-content:center}#status-panel .s-char-name{font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.6rem;color:#c8c0b0;letter-spacing:3px}#status-panel .s-char-role{font-size:.8rem;color:#7a6e5e;font-weight:300}#status-panel .s-char-idx{font-size:.55rem;color:#d4503a;opacity:.5}#status-panel .s-content{padding:8px 12px;position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:10px}#status-panel .s-seal{width:140px;height:190px;display:grid;place-items:center;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:3.5rem;color:rgba(212,80,58,.35);background:radial-gradient(ellipse at center 40%,rgba(200,180,150,.02),transparent);border:2px solid rgba(200,180,150,.1);position:relative}#status-panel .s-seal::after,#status-panel .s-seal::before{content:'';position:absolute;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 5%,rgba(200,180,150,.1) 20%,rgba(200,180,150,.15) 50%,rgba(200,180,150,.1) 80%,transparent 95%)}#status-panel .s-seal::before{top:-1px}#status-panel .s-seal::after{bottom:-1px}#status-panel .s-info{width:100%}#status-panel .s-bar{display:flex;align-items:center;gap:8px;margin-bottom:6px}#status-panel .s-bar-lb{font-size:.85rem;color:#7a6e5e;white-space:nowrap;min-width:50px}#status-panel .s-bar-track{flex:1;height:2px;background:rgba(200,180,150,.04);position:relative;overflow:visible}#status-panel .s-bar-fill{height:100%;position:relative;transition:width .8s ease-out}#status-panel .s-bar-fill::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,var(--sc) 0,var(--sc) 65%,color-mix(in srgb,var(--sc),transparent 25%) 80%,color-mix(in srgb,var(--sc),transparent 60%) 92%,transparent)}#status-panel .s-bar-fill::after{content:'';position:absolute;top:-2px;bottom:-2px;right:-6px;width:12px;background:radial-gradient(ellipse at left center,color-mix(in srgb,var(--sc),transparent 55%),transparent 70%);opacity:.4}#status-panel .s-bar-fill.full::before{background:var(--sc)}#status-panel .s-bar-fill.full::after{display:none}#status-panel .s-bar-val{font-size:.9rem;font-weight:700;white-space:nowrap}#status-panel .s-thought{padding:4px 0 4px 8px;position:relative;margin-top:4px;font-size:.8rem;color:#9a8e7e;font-style:italic;line-height:1.5}#status-panel .s-thought::before{content:'';position:absolute;left:0;top:4px;bottom:4px;width:1px;background:linear-gradient(180deg,transparent,rgba(200,180,150,.1),transparent)}#status-panel .s-thought em{font-style:normal;color:#665e50;font-size:.65rem}#status-panel .s-colophon{text-align:center;padding:8px 0;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:.55rem;color:rgba(200,180,150,.18);letter-spacing:4px;position:relative;z-index:1}#settings-panel{display:none;position:absolute;top:100%;right:10px;background:rgba(26,23,20,.95);border:1px solid rgba(200,180,150,.1);border-radius:6px;padding:4px 0;min-width:130px;z-index:200;backdrop-filter:blur(20px);box-shadow:0 8px 32px rgba(0,0,0,.5)}#settings-panel.show{display:block}.settings-item{padding:7px 14px;cursor:pointer;font-size:.8rem;color:#7a6e5e;transition:all .15s}.settings-item:hover{background:rgba(200,180,150,.06);color:#c8c0b0}#chronicle-modal{display:none;position:fixed;inset:0;z-index:500;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);justify-content:center;align-items:center}#chronicle-modal.show{display:flex}.chronicle-box{width:90%;max-width:600px;max-height:80vh;background:rgba(26,23,20,.95);border:1px solid rgba(200,180,150,.1);border-radius:10px;overflow:hidden;display:flex;flex-direction:column}.chronicle-header{padding:14px 18px;border-bottom:1px solid rgba(200,180,150,.06);display:flex;justify-content:space-between;align-items:center;font-family:'Ma Shan Zheng',STKaiti,cursive;font-size:1.1rem;color:#c49a50}.chronicle-close{cursor:pointer;color:#665e50;font-size:1.2rem;transition:color .2s}.chronicle-close:hover{color:#c8c0b0}.chronicle-list{flex:1;overflow-y:auto;padding:14px 18px}.chronicle-entry{padding:8px 0;border-bottom:1px solid rgba(200,180,150,.04);font-size:.85rem;color:#9a8e7e;line-height:1.5}.chronicle-entry:last-child{border-bottom:none}.chronicle-time{font-size:.75rem;color:#665e50;margin-bottom:2px}@media (max-width:768px){.start-title{font-size:2.2rem;letter-spacing:.3em}#sheld{flex-direction:column!important}#status-panel{position:fixed;right:-100%;top:0;bottom:0;max-width:75%;min-width:unset;width:280px;z-index:200;transition:right .3s ease;box-shadow:-8px 0 32px rgba(0,0,0,.5)}#status-panel.mobile-open{right:0}#status-panel .s-seal{width:100px;height:140px;font-size:2.5rem}.mobile-status-toggle{display:flex!important}.mobile-overlay.show{display:block}}@media (min-width:769px){.mobile-status-toggle{display:none!important}.mobile-overlay{display:none!important}}.mobile-status-toggle{display:none;position:fixed;right:12px;bottom:60px;width:36px;height:36px;z-index:199;background:rgba(26,23,20,.9);border:1px solid rgba(200,180,150,.1);border-radius:50%;align-items:center;justify-content:center;color:#d4503a;cursor:pointer;font-size:.9rem}.mobile-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:198}</style><script type="module">var __webpack_modules__ = {
  907() {
    eval("{\n/**\n * 沉沦色欲的皇帝 — 同层前端卡入口\n *\n * 核心模块：\n * - StartScreen: 开始屏幕\n * - TimeBar: 时间栏解析渲染\n * - MainTextArea: 正文显示\n * - StatusPanel: 角色状态栏\n * - InputBar: 用户输入发送\n * - VariableSync: MVU 变量读写\n * - ChronicleModal: 编年史/读档\n */\n// ============================================================\n// 环境检测\n// ============================================================\n/** 检测是否在酒馆环境中（jQuery 和 SillyTavern 都存在则为酒馆） */\nconst isInTavern = typeof globalThis.$ === 'function'\n    && typeof globalThis.SillyTavern !== 'undefined';\n/** 独立预览时的 mock 数据 */\nconst MOCK_VARS = {\n    '皇帝': { '觉醒度': 12, '当前幕': '第一幕' },\n    '李克': { '警惕度': 35, '内心想法': '这小皇帝今晚倒是格外安分……不过最近他偶尔会问起朝政，需要多加留意。' },\n    '柳妃': { '母爱残存': 42, '内心想法': '儿啊……你又瘦了。可是今晚李克还要来……我无法拒绝他。' },\n    '林婉茹': { '忠诚动摇': 28, '内心想法': '那春药的配方……如果陛下知道真相，他会恨我吗？' },\n    '苏锦儿': { '可策反度': 15, '内心想法': '几秒钟的玩具罢了。不过李克大人今晚会来\"善后\"吧……身体已经开始期待了。' },\n    '沈清芷': { '复仇决心': 88, '身体抗药': 45, '内心想法': '总有一天，我会亲手割下那个男人的头颅……可是这该死的身体，又在渴望他了。' },\n    '赵嫣': { '暗恋强度': 72, '压抑临界': 78, '内心想法': '陛下今日整理寝具时留下的气味……不、不可以想这些。我是尚宫局的人。' },\n};\nconst CHARACTERS = [\n    {\n        name: '李克', role: '丞相', color: 'rgba(180,80,70,0.75)',\n        stats: [{ label: '警惕度', path: '/李克/警惕度' }],\n        thoughtPath: '/李克/内心想法',\n    },\n    {\n        name: '柳妃', role: '太后', color: 'rgba(190,170,90,0.7)',\n        stats: [{ label: '母爱残存', path: '/柳妃/母爱残存' }],\n        thoughtPath: '/柳妃/内心想法',\n    },\n    {\n        name: '林婉茹', role: '御医', color: 'rgba(100,170,130,0.7)',\n        stats: [{ label: '忠诚动摇', path: '/林婉茹/忠诚动摇' }],\n        thoughtPath: '/林婉茹/内心想法',\n    },\n    {\n        name: '苏锦儿', role: '御女营花魁', color: 'rgba(200,100,110,0.7)',\n        stats: [{ label: '可策反度', path: '/苏锦儿/可策反度' }],\n        thoughtPath: '/苏锦儿/内心想法',\n    },\n    {\n        name: '沈清芷', role: '将门之女', color: 'rgba(90,130,180,0.7)',\n        stats: [\n            { label: '复仇决心', path: '/沈清芷/复仇决心' },\n            { label: '身体抗药', path: '/沈清芷/身体抗药' },\n        ],\n        thoughtPath: '/沈清芷/内心想法',\n    },\n    {\n        name: '赵嫣', role: '尚宫局主事', color: 'rgba(150,110,180,0.7)',\n        stats: [\n            { label: '暗恋强度', path: '/赵嫣/暗恋强度' },\n            { label: '压抑临界', path: '/赵嫣/压抑临界' },\n        ],\n        thoughtPath: '/赵嫣/内心想法',\n    },\n];\n// 幕标识映射\nconst ACT_NAMES = {\n    '第一幕': '第一幕·沉沦',\n    '第二幕': '第二幕·裂痕',\n    '第三幕': '第三幕·暗流',\n    '第四幕': '第四幕·破局',\n};\n// ============================================================\n// 工具函数\n// ============================================================\n/** 从变量路径读取值（兼容酒馆/独立环境） */\nfunction readVar(path) {\n    try {\n        const keys = path.split('/').filter(Boolean);\n        let val;\n        if (isInTavern) {\n            // 酒馆环境：优先从 MVU stat_data 读取\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'chat' });\n                val = mvuData?.stat_data;\n            }\n            catch {\n                val = getAllVariables();\n            }\n        }\n        else {\n            // 独立环境：用 mock 数据\n            val = MOCK_VARS;\n        }\n        for (const k of keys) {\n            val = val?.[k];\n        }\n        return val;\n    }\n    catch {\n        return undefined;\n    }\n}\n/** 解析 LLM 消息中的 ☞时间栏☜ */\nfunction parseTimeBar(text) {\n    const match = text.match(/☞(.+?)☜/);\n    if (!match)\n        return null;\n    const parts = match[1].split('-').map(s => s.trim());\n    return {\n        year: parts[0] || '',\n        date: parts[1] || '',\n        weather: parts[2] || '',\n        time: parts[3] || '',\n        location: parts[4] || '',\n        atmosphere: parts[5] || '',\n    };\n}\n/** 提取正文内容（支持两种模式） */\nfunction parseMainText(text) {\n    // 模式1：标签模式 <maintext>...</maintext>\n    const tagged = text.match(/<maintext>([\\s\\S]*?)<\\/maintext>/);\n    if (tagged)\n        return tagged[1].trim();\n    // 模式2：自动提取 — ☞...☜ 之后到 <UpdateVariable> 之前\n    let content = text;\n    content = content.replace(/☞[\\s\\S]*?☜\\s*/, ''); // 移除时间栏\n    content = content.replace(/<UpdateVariable>[\\s\\S]*$/, ''); // 移除变量更新及之后\n    content = content.replace(/<StatusPlaceHolderImpl\\/?>[\\s]*$/, ''); // 移除占位符\n    content = content.replace(/<sum>[\\s\\S]*?<\\/sum>/g, ''); // 移除小总结\n    return content.trim();\n}\n/** 提取 <sum> 内容 */\nfunction parseSummary(text) {\n    const match = text.match(/<sum>([\\s\\S]*?)<\\/sum>/);\n    return match ? match[1].trim() : '';\n}\n/** 提取 <UpdateVariable> 中的 JSONPatch */\nfunction parseVariableUpdate(text) {\n    const match = text.match(/<JSONPatch>([\\s\\S]*?)<\\/JSONPatch>/);\n    if (!match)\n        return [];\n    try {\n        return JSON.parse(match[1].trim());\n    }\n    catch {\n        return [];\n    }\n}\n// ============================================================\n// 模块：开始屏幕\n// ============================================================\nfunction initStartScreen() {\n    const screen = document.getElementById('start-screen');\n    const container = document.getElementById('game-container');\n    screen.addEventListener('click', () => {\n        screen.classList.add('fade-out');\n        setTimeout(() => {\n            screen.style.display = 'none';\n            container.classList.add('active');\n        }, 800);\n        // 尝试全屏\n        try {\n            document.documentElement.requestFullscreen?.();\n        }\n        catch { }\n    });\n}\n// ============================================================\n// 模块：设置面板\n// ============================================================\nfunction initSettingsPanel() {\n    const btn = document.getElementById('settings-btn');\n    const panel = document.getElementById('settings-panel');\n    btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        panel.classList.toggle('show');\n    });\n    document.addEventListener('click', () => panel.classList.remove('show'));\n    // 编年史按钮\n    document.getElementById('btn-chronicle')?.addEventListener('click', () => {\n        panel.classList.remove('show');\n        document.getElementById('chronicle-modal')?.classList.add('show');\n    });\n    // 全屏切换\n    document.getElementById('btn-fullscreen')?.addEventListener('click', () => {\n        panel.classList.remove('show');\n        if (document.fullscreenElement) {\n            document.exitFullscreen();\n        }\n        else {\n            document.documentElement.requestFullscreen?.();\n        }\n    });\n    // 关闭编年史\n    document.getElementById('chronicle-close')?.addEventListener('click', () => {\n        document.getElementById('chronicle-modal')?.classList.remove('show');\n    });\n    document.getElementById('chronicle-modal')?.addEventListener('click', (e) => {\n        if (e.target === e.currentTarget) {\n            e.currentTarget.classList.remove('show');\n        }\n    });\n}\n// ============================================================\n// 模块：时间栏渲染\n// ============================================================\nfunction renderTimeBar(timeData) {\n    // 从变量读取幕信息\n    const awakening = readVar('/皇帝/觉醒度') ?? 0;\n    const actNum = readVar('/皇帝/当前幕') ?? '第一幕';\n    const actName = ACT_NAMES[actNum] || actNum;\n    const actTag = document.getElementById('act-tag');\n    const awakeningValue = document.getElementById('awakening-value');\n    const awakeningDots = document.getElementById('awakening-dots');\n    if (actTag)\n        actTag.textContent = actName;\n    if (awakeningValue)\n        awakeningValue.textContent = String(awakening);\n    // 渲染觉醒度进度点（每25%一个亮点，共4个）\n    if (awakeningDots) {\n        const litCount = Math.min(4, Math.floor(awakening / 25));\n        const dots = awakeningDots.querySelectorAll('.dot');\n        dots.forEach((dot, i) => {\n            dot.classList.toggle('on', i < litCount);\n        });\n    }\n    // 从时间栏数据渲染\n    if (timeData) {\n        const timeTag = document.getElementById('time-tag');\n        const weatherTag = document.getElementById('weather-tag');\n        const locationTag = document.getElementById('location-tag');\n        if (timeTag)\n            timeTag.textContent = timeData.time || '未知';\n        if (weatherTag)\n            weatherTag.textContent = timeData.weather || '';\n        if (locationTag)\n            locationTag.textContent = timeData.location || '';\n    }\n}\n// ============================================================\n// 模块：状态栏\n// ============================================================\nlet currentCharIndex = 0;\nfunction initStatusPanel() {\n    // 左右翻页导航\n    const prevBtn = document.getElementById('btn-prev');\n    const nextBtn = document.getElementById('btn-next');\n    prevBtn?.addEventListener('click', () => navigateChar(-1));\n    nextBtn?.addEventListener('click', () => navigateChar(1));\n    // 状态栏切换（桌面端设置菜单 + topbar 按钮）\n    document.getElementById('btn-toggle-sidebar')?.addEventListener('click', () => {\n        const panel = document.getElementById('status-panel');\n        if (panel)\n            panel.style.display = panel.style.display === 'none' ? '' : 'none';\n        document.getElementById('settings-panel')?.classList.remove('show');\n    });\n    // 移动端切换\n    const toggle = document.getElementById('mobile-status-toggle');\n    const panel = document.getElementById('status-panel');\n    const overlay = document.getElementById('mobile-overlay');\n    toggle?.addEventListener('click', () => {\n        panel?.classList.toggle('mobile-open');\n        overlay?.classList.toggle('show');\n    });\n    overlay?.addEventListener('click', () => {\n        panel?.classList.remove('mobile-open');\n        overlay?.classList.remove('show');\n    });\n    // 触摸滑动切换角色\n    let touchStartX = 0;\n    panel?.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; });\n    panel?.addEventListener('touchend', (e) => {\n        const dx = e.changedTouches[0].clientX - touchStartX;\n        if (Math.abs(dx) > 50)\n            navigateChar(dx < 0 ? 1 : -1);\n    });\n}\n/** 导航到上一个/下一个角色 */\nfunction navigateChar(direction) {\n    currentCharIndex = (currentCharIndex + direction + CHARACTERS.length) % CHARACTERS.length;\n    renderCharStatus();\n}\n/** 生成水渍进度条 HTML */\nfunction renderBar(label, value, color) {\n    const pct = Math.min(100, value);\n    const fullClass = pct >= 100 ? ' full' : '';\n    return `<div class=\"s-bar\">\r\n        <span class=\"s-bar-lb\">${label}</span>\r\n        <div class=\"s-bar-track\">\r\n            <div class=\"s-bar-fill${fullClass}\" style=\"width:${pct}%;--sc:${color}\"></div>\r\n        </div>\r\n        <span class=\"s-bar-val\" style=\"color:${color}\">${value}</span>\r\n    </div>`;\n}\nfunction renderCharStatus() {\n    const container = document.getElementById('char-status');\n    if (!container)\n        return;\n    const charData = CHARACTERS[currentCharIndex];\n    if (!charData) {\n        container.innerHTML = '';\n        return;\n    }\n    // 更新导航信息\n    const nameEl = document.getElementById('char-name');\n    const roleEl = document.getElementById('char-role');\n    const idxEl = document.getElementById('char-idx');\n    if (nameEl)\n        nameEl.textContent = charData.name;\n    if (roleEl)\n        roleEl.textContent = charData.role;\n    if (idxEl)\n        idxEl.textContent = `${currentCharIndex + 1}/${CHARACTERS.length}`;\n    // 印章\n    let html = `<div class=\"s-seal\">${charData.name[0]}</div>`;\n    // 属性条\n    let barsHtml = '';\n    for (const stat of charData.stats) {\n        const value = readVar(stat.path) ?? 0;\n        barsHtml += renderBar(stat.label, value, charData.color);\n    }\n    // 内心独白\n    const thought = readVar(charData.thoughtPath) || '';\n    const thoughtHtml = `<div class=\"s-thought\"><em>内心 </em>${thought ? '「' + thought + '」' : '<span style=\"opacity:.3\">暂无</span>'}</div>`;\n    html += `<div class=\"s-info\">${barsHtml}${thoughtHtml}</div>`;\n    container.innerHTML = html;\n}\n// ============================================================\n// 模块：正文渲染\n// ============================================================\nfunction renderMainText(text) {\n    const container = document.getElementById('story-text');\n    // 将文本按段落分割并渲染\n    const paragraphs = text.split('\\n').filter(p => p.trim());\n    container.innerHTML = paragraphs.map(p => `<p>${p}</p>`).join('');\n    // 滚动到底部\n    const textArea = document.getElementById('text-area');\n    textArea.scrollTop = textArea.scrollHeight;\n}\n// ============================================================\n// 模块：编年史\n// ============================================================\nconst chronicles = [];\nfunction addChronicle(time, content) {\n    chronicles.push({ time, content });\n    renderChronicles();\n}\nfunction renderChronicles() {\n    const list = document.getElementById('chronicle-list');\n    if (chronicles.length === 0) {\n        list.innerHTML = '<div class=\"chronicle-entry\"><div class=\"chronicle-time\">承平三年</div>故事尚未展开……</div>';\n        return;\n    }\n    list.innerHTML = chronicles.map(c => `\r\n    <div class=\"chronicle-entry\">\r\n      <div class=\"chronicle-time\">${c.time}</div>\r\n      ${c.content}\r\n    </div>\r\n  `).join('');\n}\n// ============================================================\n// 模块：输入栏\n// ============================================================\nfunction initInputBar() {\n    const input = document.getElementById('user-input');\n    const sendBtn = document.getElementById('send-btn');\n    const loading = document.getElementById('loading-indicator');\n    // 自动调整高度\n    input.addEventListener('input', () => {\n        input.style.height = 'auto';\n        input.style.height = Math.min(input.scrollHeight, 80) + 'px';\n    });\n    // 发送\n    const doSend = () => {\n        const text = input.value.trim();\n        if (!text)\n            return;\n        input.value = '';\n        input.style.height = 'auto';\n        loading.classList.add('show');\n        // 调用酒馆 API 发送消息\n        try {\n            // 将用户输入写到酒馆输入框并触发发送\n            const tavernInput = document.querySelector('#send_textarea');\n            if (tavernInput) {\n                tavernInput.value = text;\n                tavernInput.dispatchEvent(new Event('input', { bubbles: true }));\n            }\n            const sendButton = document.querySelector('#send_but');\n            if (sendButton) {\n                sendButton.click();\n            }\n        }\n        catch (e) {\n            console.error('发送失败:', e);\n            loading.classList.remove('show');\n        }\n    };\n    sendBtn.addEventListener('click', doSend);\n    input.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            doSend();\n        }\n    });\n}\n// ============================================================\n// 模块：消息解析与监听\n// ============================================================\nlet lastProcessedMessageCount = -1;\nfunction processLatestMessage() {\n    try {\n        // 通过 SillyTavern.chat 读取最新消息\n        const chat = SillyTavern.chat;\n        if (!chat || chat.length === 0)\n            return;\n        if (chat.length === lastProcessedMessageCount)\n            return;\n        lastProcessedMessageCount = chat.length;\n        // 获取最新的 AI 消息\n        const latestMsg = chat[chat.length - 1];\n        if (!latestMsg || latestMsg.is_user)\n            return;\n        const msgText = latestMsg.mes || '';\n        if (!msgText)\n            return;\n        // 隐藏加载指示器\n        document.getElementById('loading-indicator')?.classList.remove('show');\n        // 解析时间栏\n        const timeData = parseTimeBar(msgText);\n        renderTimeBar(timeData);\n        // 解析正文\n        const mainText = parseMainText(msgText);\n        if (mainText) {\n            renderMainText(mainText);\n        }\n        // 解析小总结 → 编年史\n        const summary = parseSummary(msgText);\n        if (summary && timeData) {\n            const timeStr = `${timeData.year} ${timeData.date} ${timeData.time}`;\n            addChronicle(timeStr, summary);\n        }\n        // 变量更新由 MVU 框架自动处理，无需手动解析\n        // 刷新状态栏\n        renderCharStatus();\n    }\n    catch (e) {\n        // 初始化阶段可能无消息，静默忽略\n    }\n}\n// 变量更新由 MVU 框架和酒馆助手脚本自动处理\n// 前端只需从 Mvu.getMvuData() 读取最新状态即可\n// ============================================================\n// 阶段3B：正则自动注入\n// ============================================================\nconst REGEX_PREFIX = '[皇帝卡]';\n/** 创建一条 TavernRegex 对象 */\nfunction createRegex(name, findRegex, replaceStr, source, destination, minDepth) {\n    return {\n        id: crypto.randomUUID?.() ?? Math.random().toString(36).slice(2),\n        script_name: `${REGEX_PREFIX} ${name}`,\n        enabled: true,\n        scope: 'character',\n        find_regex: findRegex,\n        replace_string: replaceStr,\n        trim_strings: '',\n        source: {\n            user_input: false,\n            ai_output: false,\n            slash_command: false,\n            world_info: false,\n            ...source,\n        },\n        destination: {\n            display: false,\n            prompt: false,\n            ...destination,\n        },\n        run_on_edit: true,\n        min_depth: minDepth ?? null,\n        max_depth: null,\n    };\n}\n/** 自动注入/更新角色卡正则 */\nasync function setupRegexScripts() {\n    try {\n        await updateTavernRegexesWith(regexes => {\n            // 移除旧的同名正则\n            const filtered = regexes.filter(r => !r.script_name.startsWith(REGEX_PREFIX));\n            // 添加新正则\n            filtered.push(createRegex('隐藏时间栏', '☞[\\\\s\\\\S]*?☜', '', { ai_output: true }, { display: true }), createRegex('隐藏变量更新', '<UpdateVariable>[\\\\s\\\\S]*?</UpdateVariable>', '', { ai_output: true }, { display: true }), createRegex('变量深度限制', '<UpdateVariable>[\\\\s\\\\S]*?</UpdateVariable>', '', { ai_output: true }, { prompt: true }, 6), createRegex('隐藏占位符', '<StatusPlaceHolderImpl/?>', '', { ai_output: true }, { prompt: true }));\n            return filtered;\n        }, { scope: 'character' });\n    }\n    catch (e) {\n        console.warn('[皇帝卡] 正则注入失败:', e);\n    }\n}\n// ============================================================\n// 初始化\n// ============================================================\nfunction init() {\n    initStartScreen();\n    initSettingsPanel();\n    initStatusPanel();\n    initInputBar();\n    if (isInTavern) {\n        // 阶段3A：隐藏酒馆原生消息楼层（同层界面已替代）\n        const hideStyle = document.createElement('style');\n        hideStyle.textContent = `\r\n            #chat .mes { display: none !important; }\r\n            #chat { background: transparent !important; }\r\n        `;\n        document.head.appendChild(hideStyle);\n        // 阶段3B：自动注入正则脚本\n        setupRegexScripts();\n        // 酒馆环境：检测是否已有消息（非首次打开）\n        try {\n            const chatLen = SillyTavern.chat?.length ?? 0;\n            if (chatLen > 1) {\n                document.getElementById('start-screen').style.display = 'none';\n                document.getElementById('game-container').classList.add('active');\n                processLatestMessage();\n            }\n        }\n        catch { }\n        // 监听新消息（轮询方式）\n        setInterval(processLatestMessage, 1000);\n    }\n    // 初始渲染\n    renderTimeBar();\n    renderCharStatus();\n}\n// 兼容初始化：酒馆中需等待正则注入 HTML 后再初始化，独立浏览器用 DOMContentLoaded\nif (isInTavern) {\n    // 等待正则替换将 HTML 元素注入到页面后再初始化\n    // 正则在消息渲染时触发，可能晚于脚本加载\n    let waitAttempts = 0;\n    const maxAttempts = 60; // 最多等 30 秒（每 500ms 检查一次）\n    const waitForDOM = () => {\n        const startScreen = document.getElementById('start-screen');\n        if (startScreen) {\n            console.log('[皇帝卡] DOM 元素已就绪，开始初始化');\n            init();\n        }\n        else if (waitAttempts < maxAttempts) {\n            waitAttempts++;\n            setTimeout(waitForDOM, 500);\n        }\n        else {\n            console.warn('[皇帝卡] 等待 DOM 元素超时（30秒），HTML 可能未通过正则注入');\n        }\n    };\n    $(() => waitForDOM());\n    $(window).on('pagehide', () => { });\n}\nelse {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    }\n    else {\n        init();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTA3LmpzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRztBQUVILCtEQUErRDtBQUMvRCxPQUFPO0FBQ1AsK0RBQStEO0FBRS9ELCtDQUErQztBQUMvQyxNQUFNLFVBQVUsR0FBRyxPQUFRLFVBQWtCLENBQUMsQ0FBQyxLQUFLLFVBQVU7T0FDdkQsT0FBUSxVQUFrQixDQUFDLFdBQVcsS0FBSyxXQUFXLENBQUM7QUFFOUQscUJBQXFCO0FBQ3JCLE1BQU0sU0FBUyxHQUF3QjtJQUNuQyxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7SUFDakMsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsb0NBQW9DLEVBQUU7SUFDakUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsNkJBQTZCLEVBQUU7SUFDM0QsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUseUJBQXlCLEVBQUU7SUFDeEQsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsc0NBQXNDLEVBQUU7SUFDckUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxzQ0FBc0MsRUFBRTtJQUNqRixJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLG1DQUFtQyxFQUFFO0NBQ2hGLENBQUM7QUFhRixNQUFNLFVBQVUsR0FBb0I7SUFDaEM7UUFDSSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLHNCQUFzQjtRQUNyRCxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDO1FBQzFDLFdBQVcsRUFBRSxVQUFVO0tBQzFCO0lBQ0Q7UUFDSSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLHNCQUFzQjtRQUNyRCxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDO1FBQzVDLFdBQVcsRUFBRSxVQUFVO0tBQzFCO0lBQ0Q7UUFDSSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLHVCQUF1QjtRQUN2RCxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDO1FBQzdDLFdBQVcsRUFBRSxXQUFXO0tBQzNCO0lBQ0Q7UUFDSSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLHVCQUF1QjtRQUMxRCxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDO1FBQzdDLFdBQVcsRUFBRSxXQUFXO0tBQzNCO0lBQ0Q7UUFDSSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLHNCQUFzQjtRQUN4RCxLQUFLLEVBQUU7WUFDSCxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtZQUNwQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtTQUN2QztRQUNELFdBQVcsRUFBRSxXQUFXO0tBQzNCO0lBQ0Q7UUFDSSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLHVCQUF1QjtRQUN6RCxLQUFLLEVBQUU7WUFDSCxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUNuQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFF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c3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMv5rKJ5rKm6Imy5qyy55qE55qH5bidL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDmsonmsqboibLmrLLnmoTnmofluJ0g4oCUIOWQjOWxguWJjeerr+WNoeWFpeWPo1xyXG4gKiBcclxuICog5qC45b+D5qih5Z2X77yaXHJcbiAqIC0gU3RhcnRTY3JlZW46IOW8gOWni+Wxj+W5lVxyXG4gKiAtIFRpbWVCYXI6IOaXtumXtOagj+ino+aekOa4suafk1xyXG4gKiAtIE1haW5UZXh0QXJlYTog5q2j5paH5pi+56S6XHJcbiAqIC0gU3RhdHVzUGFuZWw6IOinkuiJsueKtuaAgeagj1xyXG4gKiAtIElucHV0QmFyOiDnlKjmiLfovpPlhaXlj5HpgIFcclxuICogLSBWYXJpYWJsZVN5bmM6IE1WVSDlj5jph4/or7vlhplcclxuICogLSBDaHJvbmljbGVNb2RhbDog57yW5bm05Y+yL+ivu+aho1xyXG4gKi9cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDnjq/looPmo4DmtYtcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKiog5qOA5rWL5piv5ZCm5Zyo6YWS6aaG546v5aKD5Lit77yIalF1ZXJ5IOWSjCBTaWxseVRhdmVybiDpg73lrZjlnKjliJnkuLrphZLppobvvIkgKi9cclxuY29uc3QgaXNJblRhdmVybiA9IHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLiQgPT09ICdmdW5jdGlvbidcclxuICAgICYmIHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLlNpbGx5VGF2ZXJuICE9PSAndW5kZWZpbmVkJztcclxuXHJcbi8qKiDni6znq4vpooTop4jml7bnmoQgbW9jayDmlbDmja4gKi9cclxuY29uc3QgTU9DS19WQVJTOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xyXG4gICAgJ+eah+W4nSc6IHsgJ+iniemGkuW6pic6IDEyLCAn5b2T5YmN5bmVJzogJ+esrOS4gOW5lScgfSxcclxuICAgICfmnY7lhYsnOiB7ICforabmg5XluqYnOiAzNSwgJ+WGheW/g+aDs+azlSc6ICfov5nlsI/nmofluJ3ku4rmmZrlgJLmmK/moLzlpJblronliIbigKbigKbkuI3ov4fmnIDov5Hku5blgbblsJTkvJrpl67otbfmnJ3mlL/vvIzpnIDopoHlpJrliqDnlZnmhI/jgIInIH0sXHJcbiAgICAn5p+z5aaDJzogeyAn5q+N54ix5q6L5a2YJzogNDIsICflhoXlv4Pmg7Pms5UnOiAn5YS/5ZWK4oCm4oCm5L2g5Y+I55im5LqG44CC5Y+v5piv5LuK5pma5p2O5YWL6L+Y6KaB5p2l4oCm4oCm5oiR5peg5rOV5ouS57ud5LuW44CCJyB9LFxyXG4gICAgJ+ael+WpieiMuSc6IHsgJ+W/oOivmuWKqOaRhyc6IDI4LCAn5YaF5b+D5oOz5rOVJzogJ+mCo+aYpeiNr+eahOmFjeaWueKApuKApuWmguaenOmZm+S4i+efpemBk+ecn+ebuO+8jOS7luS8muaBqOaIkeWQl++8nycgfSxcclxuICAgICfoi4/plKblhL8nOiB7ICflj6/nrZblj43luqYnOiAxNSwgJ+WGheW/g+aDs+azlSc6ICflh6Dnp5Lpkp/nmoTnjqnlhbfnvaLkuobjgILkuI3ov4fmnY7lhYvlpKfkurrku4rmmZrkvJrmnaVcIuWWhOWQjlwi5ZCn4oCm4oCm6Lqr5L2T5bey57uP5byA5aeL5pyf5b6F5LqG44CCJyB9LFxyXG4gICAgJ+ayiOa4heiKtyc6IHsgJ+WkjeS7h+WGs+W/gyc6IDg4LCAn6Lqr5L2T5oqX6I2vJzogNDUsICflhoXlv4Pmg7Pms5UnOiAn5oC75pyJ5LiA5aSp77yM5oiR5Lya5Lqy5omL5Ymy5LiL6YKj5Liq55S35Lq655qE5aS06aKF4oCm4oCm5Y+v5piv6L+Z6K+l5q2755qE6Lqr5L2T77yM5Y+I5Zyo5ri05pyb5LuW5LqG44CCJyB9LFxyXG4gICAgJ+i1teWroyc6IHsgJ+aal+aBi+W8uuW6pic6IDcyLCAn5Y6L5oqR5Li055WMJzogNzgsICflhoXlv4Pmg7Pms5UnOiAn6Zmb5LiL5LuK5pel5pW055CG5a+d5YW35pe255WZ5LiL55qE5rCU5ZGz4oCm4oCm5LiN44CB5LiN5Y+v5Lul5oOz6L+Z5Lqb44CC5oiR5piv5bCa5a6r5bGA55qE5Lq644CCJyB9LFxyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOinkuiJsuaVsOaNruWumuS5iVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuaW50ZXJmYWNlIEdhbWVDaGFyYWN0ZXIge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcm9sZTogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIHN0YXRzOiB7IGxhYmVsOiBzdHJpbmc7IHBhdGg6IHN0cmluZyB9W107XHJcbiAgICB0aG91Z2h0UGF0aDogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBDSEFSQUNURVJTOiBHYW1lQ2hhcmFjdGVyW10gPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ+adjuWFiycsIHJvbGU6ICfkuJ7nm7gnLCBjb2xvcjogJ3JnYmEoMTgwLDgwLDcwLDAuNzUpJyxcclxuICAgICAgICBzdGF0czogW3sgbGFiZWw6ICforabmg5XluqYnLCBwYXRoOiAnL+adjuWFiy/orabmg5XluqYnIH1dLFxyXG4gICAgICAgIHRob3VnaHRQYXRoOiAnL+adjuWFiy/lhoXlv4Pmg7Pms5UnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn5p+z5aaDJywgcm9sZTogJ+WkquWQjicsIGNvbG9yOiAncmdiYSgxOTAsMTcwLDkwLDAuNyknLFxyXG4gICAgICAgIHN0YXRzOiBbeyBsYWJlbDogJ+avjeeIseaui+WtmCcsIHBhdGg6ICcv5p+z5aaDL+avjeeIseaui+WtmCcgfV0sXHJcbiAgICAgICAgdGhvdWdodFBhdGg6ICcv5p+z5aaDL+WGheW/g+aDs+azlScsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfmnpflqYnojLknLCByb2xlOiAn5b6h5Yy7JywgY29sb3I6ICdyZ2JhKDEwMCwxNzAsMTMwLDAuNyknLFxyXG4gICAgICAgIHN0YXRzOiBbeyBsYWJlbDogJ+W/oOivmuWKqOaRhycsIHBhdGg6ICcv5p6X5amJ6Iy5L+W/oOivmuWKqOaRhycgfV0sXHJcbiAgICAgICAgdGhvdWdodFBhdGg6ICcv5p6X5amJ6Iy5L+WGheW/g+aDs+azlScsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfoi4/plKblhL8nLCByb2xlOiAn5b6h5aWz6JCl6Iqx6a2BJywgY29sb3I6ICdyZ2JhKDIwMCwxMDAsMTEwLDAuNyknLFxyXG4gICAgICAgIHN0YXRzOiBbeyBsYWJlbDogJ+WPr+etluWPjeW6picsIHBhdGg6ICcv6IuP6ZSm5YS/L+WPr+etluWPjeW6picgfV0sXHJcbiAgICAgICAgdGhvdWdodFBhdGg6ICcv6IuP6ZSm5YS/L+WGheW/g+aDs+azlScsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfmsojmuIXoircnLCByb2xlOiAn5bCG6Zeo5LmL5aWzJywgY29sb3I6ICdyZ2JhKDkwLDEzMCwxODAsMC43KScsXHJcbiAgICAgICAgc3RhdHM6IFtcclxuICAgICAgICAgICAgeyBsYWJlbDogJ+WkjeS7h+WGs+W/gycsIHBhdGg6ICcv5rKI5riF6Iq3L+WkjeS7h+WGs+W/gycgfSxcclxuICAgICAgICAgICAgeyBsYWJlbDogJ+i6q+S9k+aKl+iNrycsIHBhdGg6ICcv5rKI5riF6Iq3L+i6q+S9k+aKl+iNrycgfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIHRob3VnaHRQYXRoOiAnL+ayiOa4heiKty/lhoXlv4Pmg7Pms5UnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn6LW15aujJywgcm9sZTogJ+WwmuWuq+WxgOS4u+S6iycsIGNvbG9yOiAncmdiYSgxNTAsMTEwLDE4MCwwLjcpJyxcclxuICAgICAgICBzdGF0czogW1xyXG4gICAgICAgICAgICB7IGxhYmVsOiAn5pqX5oGL5by65bqmJywgcGF0aDogJy/otbXlq6Mv5pqX5oGL5by65bqmJyB9LFxyXG4gICAgICAgICAgICB7IGxhYmVsOiAn5Y6L5oqR5Li055WMJywgcGF0aDogJy/otbXlq6Mv5Y6L5oqR5Li055WMJyB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdGhvdWdodFBhdGg6ICcv6LW15aujL+WGheW/g+aDs+azlScsXHJcbiAgICB9LFxyXG5dO1xyXG5cclxuLy8g5bmV5qCH6K+G5pig5bCEXHJcbmNvbnN0IEFDVF9OQU1FUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICfnrKzkuIDluZUnOiAn56ys5LiA5bmVwrfmsonmsqYnLFxyXG4gICAgJ+esrOS6jOW5lSc6ICfnrKzkuozluZXCt+ijgueXlScsXHJcbiAgICAn56ys5LiJ5bmVJzogJ+esrOS4ieW5lcK35pqX5rWBJyxcclxuICAgICfnrKzlm5vluZUnOiAn56ys5Zub5bmVwrfnoLTlsYAnLFxyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOW3peWFt+WHveaVsFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKiDku47lj5jph4/ot6/lvoTor7vlj5blgLzvvIjlhbzlrrnphZLppoYv54us56uL546v5aKD77yJICovXHJcbmZ1bmN0aW9uIHJlYWRWYXIocGF0aDogc3RyaW5nKTogYW55IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgbGV0IHZhbDogYW55O1xyXG4gICAgICAgIGlmIChpc0luVGF2ZXJuKSB7XHJcbiAgICAgICAgICAgIC8vIOmFkummhueOr+Wig++8muS8mOWFiOS7jiBNVlUgc3RhdF9kYXRhIOivu+WPllxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbXZ1RGF0YSA9IE12dS5nZXRNdnVEYXRhKHsgdHlwZTogJ2NoYXQnIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFsID0gbXZ1RGF0YT8uc3RhdF9kYXRhO1xyXG4gICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IGdldEFsbFZhcmlhYmxlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g54us56uL546v5aKD77ya55SoIG1vY2sg5pWw5o2uXHJcbiAgICAgICAgICAgIHZhbCA9IE1PQ0tfVkFSUztcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcclxuICAgICAgICAgICAgdmFsID0gdmFsPy5ba107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKiog6Kej5p6QIExMTSDmtojmga/kuK3nmoQg4pie5pe26Ze05qCP4picICovXHJcbmZ1bmN0aW9uIHBhcnNlVGltZUJhcih0ZXh0OiBzdHJpbmcpOiB7IHllYXI6IHN0cmluZzsgZGF0ZTogc3RyaW5nOyB3ZWF0aGVyOiBzdHJpbmc7IHRpbWU6IHN0cmluZzsgbG9jYXRpb246IHN0cmluZzsgYXRtb3NwaGVyZTogc3RyaW5nIH0gfCBudWxsIHtcclxuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgv4pieKC4rPynimJwvKTtcclxuICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgcGFydHMgPSBtYXRjaFsxXS5zcGxpdCgnLScpLm1hcChzID0+IHMudHJpbSgpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeWVhcjogcGFydHNbMF0gfHwgJycsXHJcbiAgICAgICAgZGF0ZTogcGFydHNbMV0gfHwgJycsXHJcbiAgICAgICAgd2VhdGhlcjogcGFydHNbMl0gfHwgJycsXHJcbiAgICAgICAgdGltZTogcGFydHNbM10gfHwgJycsXHJcbiAgICAgICAgbG9jYXRpb246IHBhcnRzWzRdIHx8ICcnLFxyXG4gICAgICAgIGF0bW9zcGhlcmU6IHBhcnRzWzVdIHx8ICcnLFxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqIOaPkOWPluato+aWh+WGheWuue+8iOaUr+aMgeS4pOenjeaooeW8j++8iSAqL1xyXG5mdW5jdGlvbiBwYXJzZU1haW5UZXh0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyDmqKHlvI8x77ya5qCH562+5qih5byPIDxtYWludGV4dD4uLi48L21haW50ZXh0PlxyXG4gICAgY29uc3QgdGFnZ2VkID0gdGV4dC5tYXRjaCgvPG1haW50ZXh0PihbXFxzXFxTXSo/KTxcXC9tYWludGV4dD4vKTtcclxuICAgIGlmICh0YWdnZWQpIHJldHVybiB0YWdnZWRbMV0udHJpbSgpO1xyXG5cclxuICAgIC8vIOaooeW8jzLvvJroh6rliqjmj5Dlj5Yg4oCUIOKYni4uLuKYnCDkuYvlkI7liLAgPFVwZGF0ZVZhcmlhYmxlPiDkuYvliY1cclxuICAgIGxldCBjb250ZW50ID0gdGV4dDtcclxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL+KYnltcXHNcXFNdKj/imJxcXHMqLywgJycpOyAgICAgICAgICAgIC8vIOenu+mZpOaXtumXtOagj1xyXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPFVwZGF0ZVZhcmlhYmxlPltcXHNcXFNdKiQvLCAnJyk7ICAgLy8g56e76Zmk5Y+Y6YeP5pu05paw5Y+K5LmL5ZCOXHJcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88U3RhdHVzUGxhY2VIb2xkZXJJbXBsXFwvPz5bXFxzXSokLywgJycpOyAvLyDnp7vpmaTljaDkvY3nrKZcclxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzxzdW0+W1xcc1xcU10qPzxcXC9zdW0+L2csICcnKTsgICAgICAvLyDnp7vpmaTlsI/mgLvnu5NcclxuICAgIHJldHVybiBjb250ZW50LnRyaW0oKTtcclxufVxyXG5cclxuLyoqIOaPkOWPliA8c3VtPiDlhoXlrrkgKi9cclxuZnVuY3Rpb24gcGFyc2VTdW1tYXJ5KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goLzxzdW0+KFtcXHNcXFNdKj8pPFxcL3N1bT4vKTtcclxuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdLnRyaW0oKSA6ICcnO1xyXG59XHJcblxyXG4vKiog5o+Q5Y+WIDxVcGRhdGVWYXJpYWJsZT4g5Lit55qEIEpTT05QYXRjaCAqL1xyXG5mdW5jdGlvbiBwYXJzZVZhcmlhYmxlVXBkYXRlKHRleHQ6IHN0cmluZyk6IGFueVtdIHtcclxuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgvPEpTT05QYXRjaD4oW1xcc1xcU10qPyk8XFwvSlNPTlBhdGNoPi8pO1xyXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIFtdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShtYXRjaFsxXS50cmltKCkpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5qih5Z2X77ya5byA5aeL5bGP5bmVXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBpbml0U3RhcnRTY3JlZW4oKSB7XHJcbiAgICBjb25zdCBzY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtc2NyZWVuJykhO1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY29udGFpbmVyJykhO1xyXG5cclxuICAgIHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzY3JlZW4uY2xhc3NMaXN0LmFkZCgnZmFkZS1vdXQnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgc2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9LCA4MDApO1xyXG4gICAgICAgIC8vIOWwneivleWFqOWxj1xyXG4gICAgICAgIHRyeSB7IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbj8uKCk7IH0gY2F0Y2ggeyB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaooeWdl++8muiuvue9rumdouadv1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZnVuY3Rpb24gaW5pdFNldHRpbmdzUGFuZWwoKSB7XHJcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZ3MtYnRuJykhO1xyXG4gICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZ3MtcGFuZWwnKSE7XHJcblxyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHBhbmVsLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpKTtcclxuXHJcbiAgICAvLyDnvJblubTlj7LmjInpkq5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY2hyb25pY2xlJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hyb25pY2xlLW1vZGFsJyk/LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOWFqOWxj+WIh+aNolxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1mdWxsc2NyZWVuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4/LigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOWFs+mXree8luW5tOWPslxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nocm9uaWNsZS1jbG9zZScpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hyb25pY2xlLW1vZGFsJyk/LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nocm9uaWNsZS1tb2RhbCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5qih5Z2X77ya5pe26Ze05qCP5riy5p+TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiByZW5kZXJUaW1lQmFyKHRpbWVEYXRhPzogUmV0dXJuVHlwZTx0eXBlb2YgcGFyc2VUaW1lQmFyPikge1xyXG4gICAgLy8g5LuO5Y+Y6YeP6K+75Y+W5bmV5L+h5oGvXHJcbiAgICBjb25zdCBhd2FrZW5pbmcgPSByZWFkVmFyKCcv55qH5bidL+iniemGkuW6picpID8/IDA7XHJcbiAgICBjb25zdCBhY3ROdW0gPSByZWFkVmFyKCcv55qH5bidL+W9k+WJjeW5lScpID8/ICfnrKzkuIDluZUnO1xyXG4gICAgY29uc3QgYWN0TmFtZSA9IEFDVF9OQU1FU1thY3ROdW1dIHx8IGFjdE51bTtcclxuXHJcbiAgICBjb25zdCBhY3RUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0LXRhZycpO1xyXG4gICAgY29uc3QgYXdha2VuaW5nVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXdha2VuaW5nLXZhbHVlJyk7XHJcbiAgICBjb25zdCBhd2FrZW5pbmdEb3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F3YWtlbmluZy1kb3RzJyk7XHJcblxyXG4gICAgaWYgKGFjdFRhZykgYWN0VGFnLnRleHRDb250ZW50ID0gYWN0TmFtZTtcclxuICAgIGlmIChhd2FrZW5pbmdWYWx1ZSkgYXdha2VuaW5nVmFsdWUudGV4dENvbnRlbnQgPSBTdHJpbmcoYXdha2VuaW5nKTtcclxuXHJcbiAgICAvLyDmuLLmn5Pop4nphpLluqbov5vluqbngrnvvIjmr48yNSXkuIDkuKrkuq7ngrnvvIzlhbE05Liq77yJXHJcbiAgICBpZiAoYXdha2VuaW5nRG90cykge1xyXG4gICAgICAgIGNvbnN0IGxpdENvdW50ID0gTWF0aC5taW4oNCwgTWF0aC5mbG9vcihhd2FrZW5pbmcgLyAyNSkpO1xyXG4gICAgICAgIGNvbnN0IGRvdHMgPSBhd2FrZW5pbmdEb3RzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb3QnKTtcclxuICAgICAgICBkb3RzLmZvckVhY2goKGRvdCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBkb3QuY2xhc3NMaXN0LnRvZ2dsZSgnb24nLCBpIDwgbGl0Q291bnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS7juaXtumXtOagj+aVsOaNrua4suafk1xyXG4gICAgaWYgKHRpbWVEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgdGltZVRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLXRhZycpO1xyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2VhdGhlci10YWcnKTtcclxuICAgICAgICBjb25zdCBsb2NhdGlvblRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbi10YWcnKTtcclxuICAgICAgICBpZiAodGltZVRhZykgdGltZVRhZy50ZXh0Q29udGVudCA9IHRpbWVEYXRhLnRpbWUgfHwgJ+acquefpSc7XHJcbiAgICAgICAgaWYgKHdlYXRoZXJUYWcpIHdlYXRoZXJUYWcudGV4dENvbnRlbnQgPSB0aW1lRGF0YS53ZWF0aGVyIHx8ICcnO1xyXG4gICAgICAgIGlmIChsb2NhdGlvblRhZykgbG9jYXRpb25UYWcudGV4dENvbnRlbnQgPSB0aW1lRGF0YS5sb2NhdGlvbiB8fCAnJztcclxuICAgIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaooeWdl++8mueKtuaAgeagj1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxubGV0IGN1cnJlbnRDaGFySW5kZXggPSAwO1xyXG5cclxuZnVuY3Rpb24gaW5pdFN0YXR1c1BhbmVsKCkge1xyXG4gICAgLy8g5bem5Y+z57+76aG15a+86IiqXHJcbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2Jyk7XHJcbiAgICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0Jyk7XHJcbiAgICBwcmV2QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG5hdmlnYXRlQ2hhcigtMSkpO1xyXG4gICAgbmV4dEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBuYXZpZ2F0ZUNoYXIoMSkpO1xyXG5cclxuICAgIC8vIOeKtuaAgeagj+WIh+aNou+8iOahjOmdouerr+iuvue9ruiPnOWNlSArIHRvcGJhciDmjInpkq7vvIlcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tdG9nZ2xlLXNpZGViYXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLXBhbmVsJyk7XHJcbiAgICAgICAgaWYgKHBhbmVsKSBwYW5lbC5zdHlsZS5kaXNwbGF5ID0gcGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiAnbm9uZSc7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzLXBhbmVsJyk/LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOenu+WKqOerr+WIh+aNolxyXG4gICAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS1zdGF0dXMtdG9nZ2xlJyk7XHJcbiAgICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMtcGFuZWwnKTtcclxuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLW92ZXJsYXknKTtcclxuICAgIHRvZ2dsZT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgcGFuZWw/LmNsYXNzTGlzdC50b2dnbGUoJ21vYmlsZS1vcGVuJyk7XHJcbiAgICAgICAgb3ZlcmxheT8uY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG4gICAgfSk7XHJcbiAgICBvdmVybGF5Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBwYW5lbD8uY2xhc3NMaXN0LnJlbW92ZSgnbW9iaWxlLW9wZW4nKTtcclxuICAgICAgICBvdmVybGF5Py5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDop6bmkbjmu5HliqjliIfmjaLop5LoibJcclxuICAgIGxldCB0b3VjaFN0YXJ0WCA9IDA7XHJcbiAgICBwYW5lbD8uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7IHRvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7IH0pO1xyXG4gICAgcGFuZWw/LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGUpID0+IHtcclxuICAgICAgICBjb25zdCBkeCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHRvdWNoU3RhcnRYO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhkeCkgPiA1MCkgbmF2aWdhdGVDaGFyKGR4IDwgMCA/IDEgOiAtMSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqIOWvvOiIquWIsOS4iuS4gOS4qi/kuIvkuIDkuKrop5LoibIgKi9cclxuZnVuY3Rpb24gbmF2aWdhdGVDaGFyKGRpcmVjdGlvbjogbnVtYmVyKSB7XHJcbiAgICBjdXJyZW50Q2hhckluZGV4ID0gKGN1cnJlbnRDaGFySW5kZXggKyBkaXJlY3Rpb24gKyBDSEFSQUNURVJTLmxlbmd0aCkgJSBDSEFSQUNURVJTLmxlbmd0aDtcclxuICAgIHJlbmRlckNoYXJTdGF0dXMoKTtcclxufVxyXG5cclxuLyoqIOeUn+aIkOawtOa4jei/m+W6puadoSBIVE1MICovXHJcbmZ1bmN0aW9uIHJlbmRlckJhcihsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLCBjb2xvcjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHBjdCA9IE1hdGgubWluKDEwMCwgdmFsdWUpO1xyXG4gICAgY29uc3QgZnVsbENsYXNzID0gcGN0ID49IDEwMCA/ICcgZnVsbCcgOiAnJztcclxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInMtYmFyXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzLWJhci1sYlwiPiR7bGFiZWx9PC9zcGFuPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzLWJhci10cmFja1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicy1iYXItZmlsbCR7ZnVsbENsYXNzfVwiIHN0eWxlPVwid2lkdGg6JHtwY3R9JTstLXNjOiR7Y29sb3J9XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzLWJhci12YWxcIiBzdHlsZT1cImNvbG9yOiR7Y29sb3J9XCI+JHt2YWx1ZX08L3NwYW4+XHJcbiAgICA8L2Rpdj5gO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDaGFyU3RhdHVzKCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXItc3RhdHVzJyk7XHJcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xyXG4gICAgY29uc3QgY2hhckRhdGEgPSBDSEFSQUNURVJTW2N1cnJlbnRDaGFySW5kZXhdO1xyXG4gICAgaWYgKCFjaGFyRGF0YSkgeyBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7IHJldHVybjsgfVxyXG5cclxuICAgIC8vIOabtOaWsOWvvOiIquS/oeaBr1xyXG4gICAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXItbmFtZScpO1xyXG4gICAgY29uc3Qgcm9sZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXItcm9sZScpO1xyXG4gICAgY29uc3QgaWR4RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhci1pZHgnKTtcclxuICAgIGlmIChuYW1lRWwpIG5hbWVFbC50ZXh0Q29udGVudCA9IGNoYXJEYXRhLm5hbWU7XHJcbiAgICBpZiAocm9sZUVsKSByb2xlRWwudGV4dENvbnRlbnQgPSBjaGFyRGF0YS5yb2xlO1xyXG4gICAgaWYgKGlkeEVsKSBpZHhFbC50ZXh0Q29udGVudCA9IGAke2N1cnJlbnRDaGFySW5kZXggKyAxfS8ke0NIQVJBQ1RFUlMubGVuZ3RofWA7XHJcblxyXG4gICAgLy8g5Y2w56ugXHJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwicy1zZWFsXCI+JHtjaGFyRGF0YS5uYW1lWzBdfTwvZGl2PmA7XHJcblxyXG4gICAgLy8g5bGe5oCn5p2hXHJcbiAgICBsZXQgYmFyc0h0bWwgPSAnJztcclxuICAgIGZvciAoY29uc3Qgc3RhdCBvZiBjaGFyRGF0YS5zdGF0cykge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVhZFZhcihzdGF0LnBhdGgpID8/IDA7XHJcbiAgICAgICAgYmFyc0h0bWwgKz0gcmVuZGVyQmFyKHN0YXQubGFiZWwsIHZhbHVlLCBjaGFyRGF0YS5jb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YaF5b+D54us55m9XHJcbiAgICBjb25zdCB0aG91Z2h0ID0gcmVhZFZhcihjaGFyRGF0YS50aG91Z2h0UGF0aCkgfHwgJyc7XHJcbiAgICBjb25zdCB0aG91Z2h0SHRtbCA9IGA8ZGl2IGNsYXNzPVwicy10aG91Z2h0XCI+PGVtPuWGheW/gyA8L2VtPiR7dGhvdWdodCA/ICfjgIwnICsgdGhvdWdodCArICfjgI0nIDogJzxzcGFuIHN0eWxlPVwib3BhY2l0eTouM1wiPuaaguaXoDwvc3Bhbj4nfTwvZGl2PmA7XHJcblxyXG4gICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInMtaW5mb1wiPiR7YmFyc0h0bWx9JHt0aG91Z2h0SHRtbH08L2Rpdj5gO1xyXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDmqKHlnZfvvJrmraPmlofmuLLmn5NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIHJlbmRlck1haW5UZXh0KHRleHQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3J5LXRleHQnKSE7XHJcbiAgICAvLyDlsIbmlofmnKzmjInmrrXokL3liIblibLlubbmuLLmn5NcclxuICAgIGNvbnN0IHBhcmFncmFwaHMgPSB0ZXh0LnNwbGl0KCdcXG4nKS5maWx0ZXIocCA9PiBwLnRyaW0oKSk7XHJcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gcGFyYWdyYXBocy5tYXAocCA9PiBgPHA+JHtwfTwvcD5gKS5qb2luKCcnKTtcclxuXHJcbiAgICAvLyDmu5rliqjliLDlupXpg6hcclxuICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHQtYXJlYScpITtcclxuICAgIHRleHRBcmVhLnNjcm9sbFRvcCA9IHRleHRBcmVhLnNjcm9sbEhlaWdodDtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaooeWdl++8mue8luW5tOWPslxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgY2hyb25pY2xlczogeyB0aW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9W10gPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGFkZENocm9uaWNsZSh0aW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykge1xyXG4gICAgY2hyb25pY2xlcy5wdXNoKHsgdGltZSwgY29udGVudCB9KTtcclxuICAgIHJlbmRlckNocm9uaWNsZXMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2hyb25pY2xlcygpIHtcclxuICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hyb25pY2xlLWxpc3QnKSE7XHJcbiAgICBpZiAoY2hyb25pY2xlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBsaXN0LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiY2hyb25pY2xlLWVudHJ5XCI+PGRpdiBjbGFzcz1cImNocm9uaWNsZS10aW1lXCI+5om/5bmz5LiJ5bm0PC9kaXY+5pWF5LqL5bCa5pyq5bGV5byA4oCm4oCmPC9kaXY+JztcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsaXN0LmlubmVySFRNTCA9IGNocm9uaWNsZXMubWFwKGMgPT4gYFxyXG4gICAgPGRpdiBjbGFzcz1cImNocm9uaWNsZS1lbnRyeVwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2hyb25pY2xlLXRpbWVcIj4ke2MudGltZX08L2Rpdj5cclxuICAgICAgJHtjLmNvbnRlbnR9XHJcbiAgICA8L2Rpdj5cclxuICBgKS5qb2luKCcnKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaooeWdl++8mui+k+WFpeagj1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZnVuY3Rpb24gaW5pdElucHV0QmFyKCkge1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlci1pbnB1dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICBjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtYnRuJykhO1xyXG4gICAgY29uc3QgbG9hZGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLWluZGljYXRvcicpITtcclxuXHJcbiAgICAvLyDoh6rliqjosIPmlbTpq5jluqZcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIGlucHV0LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICBpbnB1dC5zdHlsZS5oZWlnaHQgPSBNYXRoLm1pbihpbnB1dC5zY3JvbGxIZWlnaHQsIDgwKSArICdweCc7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDlj5HpgIFcclxuICAgIGNvbnN0IGRvU2VuZCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gaW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIGlmICghdGV4dCkgcmV0dXJuO1xyXG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIGxvYWRpbmcuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG5cclxuICAgICAgICAvLyDosIPnlKjphZLppoYgQVBJIOWPkemAgea2iOaBr1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIOWwhueUqOaIt+i+k+WFpeWGmeWIsOmFkummhui+k+WFpeahhuW5tuinpuWPkeWPkemAgVxyXG4gICAgICAgICAgICBjb25zdCB0YXZlcm5JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZW5kX3RleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHRhdmVybklucHV0KSB7XHJcbiAgICAgICAgICAgICAgICB0YXZlcm5JbnB1dC52YWx1ZSA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB0YXZlcm5JbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VuZF9idXQnKTtcclxuICAgICAgICAgICAgaWYgKHNlbmRCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIChzZW5kQnV0dG9uIGFzIEhUTUxFbGVtZW50KS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCflj5HpgIHlpLHotKU6JywgZSk7XHJcbiAgICAgICAgICAgIGxvYWRpbmcuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRvU2VuZCk7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBkb1NlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaooeWdl++8mua2iOaBr+ino+aekOS4juebkeWQrFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxubGV0IGxhc3RQcm9jZXNzZWRNZXNzYWdlQ291bnQgPSAtMTtcclxuXHJcbmZ1bmN0aW9uIHByb2Nlc3NMYXRlc3RNZXNzYWdlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyDpgJrov4cgU2lsbHlUYXZlcm4uY2hhdCDor7vlj5bmnIDmlrDmtojmga9cclxuICAgICAgICBjb25zdCBjaGF0ID0gU2lsbHlUYXZlcm4uY2hhdDtcclxuICAgICAgICBpZiAoIWNoYXQgfHwgY2hhdC5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICBpZiAoY2hhdC5sZW5ndGggPT09IGxhc3RQcm9jZXNzZWRNZXNzYWdlQ291bnQpIHJldHVybjtcclxuICAgICAgICBsYXN0UHJvY2Vzc2VkTWVzc2FnZUNvdW50ID0gY2hhdC5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIOiOt+WPluacgOaWsOeahCBBSSDmtojmga9cclxuICAgICAgICBjb25zdCBsYXRlc3RNc2cgPSBjaGF0W2NoYXQubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgaWYgKCFsYXRlc3RNc2cgfHwgbGF0ZXN0TXNnLmlzX3VzZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbXNnVGV4dCA9IGxhdGVzdE1zZy5tZXMgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFtc2dUZXh0KSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIOmakOiXj+WKoOi9veaMh+ekuuWZqFxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLWluZGljYXRvcicpPy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcblxyXG4gICAgICAgIC8vIOino+aekOaXtumXtOagj1xyXG4gICAgICAgIGNvbnN0IHRpbWVEYXRhID0gcGFyc2VUaW1lQmFyKG1zZ1RleHQpO1xyXG4gICAgICAgIHJlbmRlclRpbWVCYXIodGltZURhdGEpO1xyXG5cclxuICAgICAgICAvLyDop6PmnpDmraPmlodcclxuICAgICAgICBjb25zdCBtYWluVGV4dCA9IHBhcnNlTWFpblRleHQobXNnVGV4dCk7XHJcbiAgICAgICAgaWYgKG1haW5UZXh0KSB7XHJcbiAgICAgICAgICAgIHJlbmRlck1haW5UZXh0KG1haW5UZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOino+aekOWwj+aAu+e7kyDihpIg57yW5bm05Y+yXHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IHBhcnNlU3VtbWFyeShtc2dUZXh0KTtcclxuICAgICAgICBpZiAoc3VtbWFyeSAmJiB0aW1lRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lU3RyID0gYCR7dGltZURhdGEueWVhcn0gJHt0aW1lRGF0YS5kYXRlfSAke3RpbWVEYXRhLnRpbWV9YDtcclxuICAgICAgICAgICAgYWRkQ2hyb25pY2xlKHRpbWVTdHIsIHN1bW1hcnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Y+Y6YeP5pu05paw55SxIE1WVSDmoYbmnrboh6rliqjlpITnkIbvvIzml6DpnIDmiYvliqjop6PmnpBcclxuXHJcbiAgICAgICAgLy8g5Yi35paw54q25oCB5qCPXHJcbiAgICAgICAgcmVuZGVyQ2hhclN0YXR1cygpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyDliJ3lp4vljJbpmLbmrrXlj6/og73ml6Dmtojmga/vvIzpnZnpu5jlv73nlaVcclxuICAgIH1cclxufVxyXG5cclxuLy8g5Y+Y6YeP5pu05paw55SxIE1WVSDmoYbmnrblkozphZLppobliqnmiYvohJrmnKzoh6rliqjlpITnkIZcclxuLy8g5YmN56uv5Y+q6ZyA5LuOIE12dS5nZXRNdnVEYXRhKCkg6K+75Y+W5pyA5paw54q25oCB5Y2z5Y+vXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g6Zi25q61M0LvvJrmraPliJnoh6rliqjms6jlhaVcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IFJFR0VYX1BSRUZJWCA9ICdb55qH5bid5Y2hXSc7XHJcblxyXG4vKiog5Yib5bu65LiA5p2hIFRhdmVyblJlZ2V4IOWvueixoSAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSZWdleChcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGZpbmRSZWdleDogc3RyaW5nLFxyXG4gICAgcmVwbGFjZVN0cjogc3RyaW5nLFxyXG4gICAgc291cmNlOiBQYXJ0aWFsPFRhdmVyblJlZ2V4Wydzb3VyY2UnXT4sXHJcbiAgICBkZXN0aW5hdGlvbjogUGFydGlhbDxUYXZlcm5SZWdleFsnZGVzdGluYXRpb24nXT4sXHJcbiAgICBtaW5EZXB0aD86IG51bWJlcixcclxuKTogVGF2ZXJuUmVnZXgge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQ/LigpID8/IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpLFxyXG4gICAgICAgIHNjcmlwdF9uYW1lOiBgJHtSRUdFWF9QUkVGSVh9ICR7bmFtZX1gLFxyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgc2NvcGU6ICdjaGFyYWN0ZXInLFxyXG4gICAgICAgIGZpbmRfcmVnZXg6IGZpbmRSZWdleCxcclxuICAgICAgICByZXBsYWNlX3N0cmluZzogcmVwbGFjZVN0cixcclxuICAgICAgICB0cmltX3N0cmluZ3M6ICcnLFxyXG4gICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgICB1c2VyX2lucHV0OiBmYWxzZSxcclxuICAgICAgICAgICAgYWlfb3V0cHV0OiBmYWxzZSxcclxuICAgICAgICAgICAgc2xhc2hfY29tbWFuZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHdvcmxkX2luZm86IGZhbHNlLFxyXG4gICAgICAgICAgICAuLi5zb3VyY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0aW5hdGlvbjoge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgcHJvbXB0OiBmYWxzZSxcclxuICAgICAgICAgICAgLi4uZGVzdGluYXRpb24sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBydW5fb25fZWRpdDogdHJ1ZSxcclxuICAgICAgICBtaW5fZGVwdGg6IG1pbkRlcHRoID8/IG51bGwsXHJcbiAgICAgICAgbWF4X2RlcHRoOiBudWxsLFxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqIOiHquWKqOazqOWFpS/mm7TmlrDop5LoibLljaHmraPliJkgKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0dXBSZWdleFNjcmlwdHMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZVRhdmVyblJlZ2V4ZXNXaXRoKHJlZ2V4ZXMgPT4ge1xyXG4gICAgICAgICAgICAvLyDnp7vpmaTml6fnmoTlkIzlkI3mraPliJlcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSByZWdleGVzLmZpbHRlcihyID0+ICFyLnNjcmlwdF9uYW1lLnN0YXJ0c1dpdGgoUkVHRVhfUFJFRklYKSk7XHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOaWsOato+WImVxyXG4gICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlUmVnZXgoJ+makOiXj+aXtumXtOagjycsICfimJ5bXFxcXHNcXFxcU10qP+KYnCcsICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgYWlfb3V0cHV0OiB0cnVlIH0sIHsgZGlzcGxheTogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVJlZ2V4KCfpmpDol4/lj5jph4/mm7TmlrAnLCAnPFVwZGF0ZVZhcmlhYmxlPltcXFxcc1xcXFxTXSo/PC9VcGRhdGVWYXJpYWJsZT4nLCAnJyxcclxuICAgICAgICAgICAgICAgICAgICB7IGFpX291dHB1dDogdHJ1ZSB9LCB7IGRpc3BsYXk6IHRydWUgfSksXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSZWdleCgn5Y+Y6YeP5rex5bqm6ZmQ5Yi2JywgJzxVcGRhdGVWYXJpYWJsZT5bXFxcXHNcXFxcU10qPzwvVXBkYXRlVmFyaWFibGU+JywgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgeyBhaV9vdXRwdXQ6IHRydWUgfSwgeyBwcm9tcHQ6IHRydWUgfSwgNiksXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSZWdleCgn6ZqQ6JeP5Y2g5L2N56ymJywgJzxTdGF0dXNQbGFjZUhvbGRlckltcGwvPz4nLCAnJyxcclxuICAgICAgICAgICAgICAgICAgICB7IGFpX291dHB1dDogdHJ1ZSB9LCB7IHByb21wdDogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xyXG4gICAgICAgIH0sIHsgc2NvcGU6ICdjaGFyYWN0ZXInIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignW+eah+W4neWNoV0g5q2j5YiZ5rOo5YWl5aSx6LSlOicsIGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDliJ3lp4vljJZcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBpbml0U3RhcnRTY3JlZW4oKTtcclxuICAgIGluaXRTZXR0aW5nc1BhbmVsKCk7XHJcbiAgICBpbml0U3RhdHVzUGFuZWwoKTtcclxuICAgIGluaXRJbnB1dEJhcigpO1xyXG5cclxuICAgIGlmIChpc0luVGF2ZXJuKSB7XHJcbiAgICAgICAgLy8g6Zi25q61M0HvvJrpmpDol4/phZLppobljp/nlJ/mtojmga/mpbzlsYLvvIjlkIzlsYLnlYzpnaLlt7Lmm7/ku6PvvIlcclxuICAgICAgICBjb25zdCBoaWRlU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIGhpZGVTdHlsZS50ZXh0Q29udGVudCA9IGBcclxuICAgICAgICAgICAgI2NoYXQgLm1lcyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxyXG4gICAgICAgICAgICAjY2hhdCB7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IH1cclxuICAgICAgICBgO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaGlkZVN0eWxlKTtcclxuXHJcbiAgICAgICAgLy8g6Zi25q61M0LvvJroh6rliqjms6jlhaXmraPliJnohJrmnKxcclxuICAgICAgICBzZXR1cFJlZ2V4U2NyaXB0cygpO1xyXG5cclxuICAgICAgICAvLyDphZLppobnjq/looPvvJrmo4DmtYvmmK/lkKblt7LmnInmtojmga/vvIjpnZ7pppbmrKHmiZPlvIDvvIlcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjaGF0TGVuID0gU2lsbHlUYXZlcm4uY2hhdD8ubGVuZ3RoID8/IDA7XHJcbiAgICAgICAgICAgIGlmIChjaGF0TGVuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LXNjcmVlbicpIS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY29udGFpbmVyJykhLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc0xhdGVzdE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgIC8vIOebkeWQrOaWsOa2iOaBr++8iOi9ruivouaWueW8j++8iVxyXG4gICAgICAgIHNldEludGVydmFsKHByb2Nlc3NMYXRlc3RNZXNzYWdlLCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDliJ3lp4vmuLLmn5NcclxuICAgIHJlbmRlclRpbWVCYXIoKTtcclxuICAgIHJlbmRlckNoYXJTdGF0dXMoKTtcclxufVxyXG5cclxuLy8g5YW85a655Yid5aeL5YyW77ya6YWS6aaG5Lit6ZyA562J5b6F5q2j5YiZ5rOo5YWlIEhUTUwg5ZCO5YaN5Yid5aeL5YyW77yM54us56uL5rWP6KeI5Zmo55SoIERPTUNvbnRlbnRMb2FkZWRcclxuaWYgKGlzSW5UYXZlcm4pIHtcclxuICAgIC8vIOetieW+heato+WImeabv+aNouWwhiBIVE1MIOWFg+e0oOazqOWFpeWIsOmhtemdouWQjuWGjeWIneWni+WMllxyXG4gICAgLy8g5q2j5YiZ5Zyo5raI5oGv5riy5p+T5pe26Kem5Y+R77yM5Y+v6IO95pma5LqO6ISa5pys5Yqg6L29XHJcbiAgICBsZXQgd2FpdEF0dGVtcHRzID0gMDtcclxuICAgIGNvbnN0IG1heEF0dGVtcHRzID0gNjA7IC8vIOacgOWkmuetiSAzMCDnp5LvvIjmr48gNTAwbXMg5qOA5p+l5LiA5qyh77yJXHJcbiAgICBjb25zdCB3YWl0Rm9yRE9NID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0U2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LXNjcmVlbicpO1xyXG4gICAgICAgIGlmIChzdGFydFNjcmVlbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW+eah+W4neWNoV0gRE9NIOWFg+e0oOW3suWwsee7qu+8jOW8gOWni+WIneWni+WMlicpO1xyXG4gICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3YWl0QXR0ZW1wdHMgPCBtYXhBdHRlbXB0cykge1xyXG4gICAgICAgICAgICB3YWl0QXR0ZW1wdHMrKztcclxuICAgICAgICAgICAgc2V0VGltZW91dCh3YWl0Rm9yRE9NLCA1MDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW+eah+W4neWNoV0g562J5b6FIERPTSDlhYPntKDotoXml7bvvIgzMOenku+8ie+8jEhUTUwg5Y+v6IO95pyq6YCa6L+H5q2j5YiZ5rOo5YWlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgICQoKCkgPT4gd2FpdEZvckRPTSgpKTtcclxuICAgICQod2luZG93KS5vbigncGFnZWhpZGUnLCAoKSA9PiB7IC8qIOa4heeQhuW3peS9nCAqLyB9KTtcclxufSBlbHNlIHtcclxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaW5pdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluaXQoKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///907\n\n}");
  }
};

var __webpack_exports__ = {};

__webpack_modules__[907]();</script></head><body><div id="start-screen"><div class="start-title">沉沦色欲的皇帝</div><div class="start-subtitle">— 点击任意处开始 —</div></div><div id="game-container"><div id="svm-topbar"><i class="fa-solid fa-feather-pointed seal" style="font-size:11px"></i> <span id="act-tag">第一幕·沉沦</span><div class="time-info"><span id="time-tag">子时</span> <span class="time-sep">·</span> <span id="weather-tag">月明风清</span> <span class="time-sep">·</span> <span id="location-tag">皇帝寝宫</span></div><div class="dots" id="awakening-dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div><span class="seal" style="font-size:12px;opacity:.6">觉醒 <span id="awakening-value">5</span></span> <button class="tg-btn" id="settings-btn" title="设置"><i class="fa-solid fa-gear"></i></button><div id="settings-panel"><div class="settings-item" id="btn-chronicle">📜 编年史</div><div class="settings-item" id="btn-settings">⚙ 设置</div><div class="settings-item" id="btn-fullscreen">⛶ 全屏切换</div><div class="settings-item" id="btn-toggle-sidebar">☰ 状态栏</div></div></div><div id="sheld"><div id="holder"><div id="text-area"><div id="story-text"><p>烛火摇曳，寝宫内弥漫着檀香与脂粉交织的气息。</p><p>龙床上的绫罗锦被微微起伏，帘幔低垂间隐约可见交叠的身影。</p></div><div class="loading-indicator" id="loading-indicator"><span class="loading-dots">正在生成</span></div></div><div id="input-bar"><textarea id="user-input" rows="1" placeholder="输入你的行动..."></textarea> <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button></div></div><div id="status-panel"><div class="s-title">人物状态</div><div class="s-nav"><button class="s-nav-btn" id="btn-prev"><i class="fa-solid fa-chevron-left"></i></button><div class="s-nav-center"><span class="s-char-name" id="char-name">李克</span> <span class="s-char-role" id="char-role">丞相</span> <span class="s-char-idx" id="char-idx">1/6</span></div><button class="s-nav-btn" id="btn-next"><i class="fa-solid fa-chevron-right"></i></button></div><div class="s-content" id="char-status"></div><div class="s-colophon">承平三年</div></div></div></div><div id="chronicle-modal"><div class="chronicle-box"><div class="chronicle-header"><span>📜 编年史</span> <span class="chronicle-close" id="chronicle-close">✕</span></div><div class="chronicle-list" id="chronicle-list"><div class="chronicle-entry"><div class="chronicle-time">承平三年 二月初七 子时</div>故事尚未展开……</div></div></div></div><button class="mobile-status-toggle" id="mobile-status-toggle">☰</button><div class="mobile-overlay" id="mobile-overlay"></div><div id="app"></div></body>